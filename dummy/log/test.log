  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mPurchase Load (0.2ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-24 16:41:24 +0200
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-24 16:47:14 +0200
  [1m[36mPurchase Load (0.2ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-24 16:48:42 +0200
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-24 16:50:00 +0200
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-25 10:23:29 +0200
  [1m[36mPurchase Load (0.2ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-25 11:21:46 +0200
  [1m[36mPurchase Load (0.2ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-25 11:37:38 +0200
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-25 11:50:19 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-25 11:50:20 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-25 11:50:20 +0200
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-25 11:50:48 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-25 11:50:48 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-25 11:50:48 +0200
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-25 11:57:43 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-25 11:57:44 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-25 11:57:44 +0200
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-25 11:58:38 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-25 11:58:38 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-25 11:58:38 +0200
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-25 12:01:32 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-25 12:01:32 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-25 12:01:32 +0200
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-25 12:09:45 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-25 12:09:45 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-25 12:09:45 +0200
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-25 12:13:09 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-25 12:13:09 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-25 12:13:09 +0200
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-25 12:16:04 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-25 12:16:04 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-25 12:16:04 +0200
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-25 13:10:06 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-25 13:10:06 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-25 13:10:06 +0200
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-25 13:10:42 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-25 13:10:42 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-25 13:10:42 +0200
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-25 13:18:42 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-25 13:18:42 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-25 13:18:42 +0200
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-25 13:59:50 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-25 13:59:50 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-25 13:59:50 +0200
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-25 14:02:22 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-25 14:02:22 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-25 14:02:22 +0200
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-25 14:35:03 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-25 14:35:03 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-25 14:35:03 +0200
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-25 14:46:42 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-25 14:46:42 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-25 14:46:42 +0200
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-25 14:47:37 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-25 14:47:37 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-25 14:47:37 +0200
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-25 14:59:31 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-25 14:59:31 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-25 14:59:31 +0200
  [1m[36mPurchase Load (0.2ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-25 15:05:42 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-25 15:05:42 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-25 15:05:42 +0200
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-25 15:35:15 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-25 15:35:15 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-25 15:35:15 +0200
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-25 15:35:46 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-25 15:35:46 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-25 15:35:46 +0200
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-25 15:40:06 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-25 15:40:07 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-25 15:40:07 +0200
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-25 15:45:01 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-25 15:45:01 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-25 15:45:01 +0200
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-28 10:07:53 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-28 10:07:53 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-28 10:07:53 +0200
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-28 10:08:13 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-28 10:08:13 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-28 10:08:13 +0200
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-28 10:32:03 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-28 10:32:03 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-28 10:32:03 +0200
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-28 10:32:30 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-28 10:32:30 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-28 10:32:30 +0200
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-28 10:33:53 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-28 10:33:54 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-28 10:33:54 +0200
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-28 10:34:09 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-28 10:34:09 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-28 10:34:09 +0200
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-28 11:08:43 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-28 11:08:43 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-28 11:08:43 +0200
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-28 11:11:32 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-28 11:11:32 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-28 11:11:32 +0200
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[35m (0.3ms)[0m  begin transaction
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-28 11:12:43 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-28 11:12:43 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-28 11:12:43 +0200
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-28 11:56:59 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-28 11:56:59 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-28 11:56:59 +0200
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-28 13:09:24 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-28 13:09:24 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-28 13:09:24 +0200
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-28 13:10:14 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-28 13:10:14 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-28 13:10:14 +0200
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-28 13:12:10 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-28 13:12:10 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-28 13:12:10 +0200
  [1m[36mPurchase Load (0.2ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-28 13:16:36 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-28 13:16:36 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-28 13:16:36 +0200
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-28 13:18:59 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-28 13:18:59 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-28 13:18:59 +0200
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-28 13:19:36 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-28 13:19:36 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-28 13:19:36 +0200
  [1m[36mPurchase Load (0.2ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-28 13:20:54 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-28 13:20:54 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-28 13:20:54 +0200
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-28 13:21:40 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-28 13:21:40 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-28 13:21:41 +0200
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-28 13:21:52 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-28 13:21:52 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-28 13:21:52 +0200
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-28 13:32:37 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-28 13:32:37 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-28 13:32:37 +0200
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-28 13:32:53 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-28 13:32:53 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-28 13:32:53 +0200
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-28 13:36:09 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-28 13:36:10 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-28 13:36:10 +0200
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-28 14:45:50 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-28 14:45:50 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-28 14:45:50 +0200
  [1m[36mPurchase Load (0.2ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-28 14:56:05 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-28 14:56:05 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-28 14:56:05 +0200
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-28 14:57:15 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-28 14:57:16 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-28 14:57:16 +0200
  [1m[36mPurchase Load (0.2ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-28 15:48:15 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-28 15:48:15 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-28 15:48:15 +0200
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-28 15:51:21 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-28 15:51:21 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-28 15:51:21 +0200
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-28 15:58:02 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-28 15:58:02 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-28 15:58:02 +0200
  [1m[36mPurchase Load (0.3ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-28 15:58:58 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-28 15:58:58 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-28 15:58:58 +0200
Started GET "/order" for 127.0.0.1 at 2015-09-28 15:58:58 +0200
Processing by ShopController#order as HTML
Completed 500 Internal Server Error in 502ms
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-28 16:01:11 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-28 16:01:11 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-28 16:01:11 +0200
Started GET "/order" for 127.0.0.1 at 2015-09-28 16:01:11 +0200
Processing by ShopController#order as HTML
Completed 500 Internal Server Error in 38ms
  [1m[36mPurchase Load (0.2ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[36mPurchase Load (0.2ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (7.3ms)[0m  [1mINSERT INTO "products" ("cost", "created_at", "inventory", "link", "name", "price", "properties", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["cost", 5.0], ["created_at", "2015-09-28 14:21:46.151115"], ["inventory", 5], ["link", "product_1"], ["name", "product 1"], ["price", 10.0], ["properties", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["tax", 10.0], ["updated_at", "2015-09-28 14:21:46.151115"]]
  [1m[35m (14.2ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "baskets" ("created_at", "total_price", "total_tax", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-09-28 14:21:46.202174"], ["total_price", 10.0], ["total_tax", 0.91], ["updated_at", "2015-09-28 14:21:46.202174"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("basket_id", "created_at", "name", "price", "product_id", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["basket_id", 1], ["created_at", "2015-09-28 14:21:46.204353"], ["name", "product 1"], ["price", 10.0], ["product_id", 1], ["tax", 10.0], ["updated_at", "2015-09-28 14:21:46.204353"]]
  [1m[35mBasket Load (0.2ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 1]]
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items"  WHERE "items"."basket_id" = ?[0m  [["basket_id", 1]]
  [1m[35mSQL (12.4ms)[0m  UPDATE "baskets" SET "updated_at" = '2015-09-28 14:21:46.210038' WHERE "baskets"."id" = 1
  [1m[36m (13.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mOrder Load (0.5ms)[0m  [1mSELECT  "orders".* FROM "orders"   ORDER BY created_at DESC LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "orders" ("address", "created_at", "email", "number", "ordered_on", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["created_at", "2015-09-28 14:21:46.882237"], ["email", "test1@test.com"], ["number", "R201530000"], ["ordered_on", "2015-09-28"], ["updated_at", "2015-09-28 14:21:46.882237"]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "baskets" SET "kori_id" = ?, "kori_type" = ?, "updated_at" = ? WHERE "baskets"."id" = 1[0m  [["kori_id", 1], ["kori_type", "Order"], ["updated_at", "2015-09-28 14:21:46.898677"]]
  [1m[35m (14.4ms)[0m  commit transaction
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-28 16:21:47 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-28 16:21:47 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-28 16:21:47 +0200
Started GET "/order" for 127.0.0.1 at 2015-09-28 16:21:47 +0200
Processing by ShopController#order as HTML
  [1m[36mOrder Load (0.4ms)[0m  [1mSELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 1]]
Completed 500 Internal Server Error in 99ms
  [1m[36mPurchase Load (0.2ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "products" ("cost", "created_at", "inventory", "link", "name", "price", "properties", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["cost", 5.0], ["created_at", "2015-09-28 14:22:35.124375"], ["inventory", 5], ["link", "product_1"], ["name", "product 1"], ["price", 10.0], ["properties", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["tax", 10.0], ["updated_at", "2015-09-28 14:22:35.124375"]]
  [1m[35m (91.9ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "baskets" ("created_at", "total_price", "total_tax", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-09-28 14:22:35.227777"], ["total_price", 10.0], ["total_tax", 0.91], ["updated_at", "2015-09-28 14:22:35.227777"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("basket_id", "created_at", "name", "price", "product_id", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["basket_id", 2], ["created_at", "2015-09-28 14:22:35.229015"], ["name", "product 1"], ["price", 10.0], ["product_id", 2], ["tax", 10.0], ["updated_at", "2015-09-28 14:22:35.229015"]]
  [1m[35mBasket Load (0.2ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 2]]
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items"  WHERE "items"."basket_id" = ?[0m  [["basket_id", 2]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "baskets" SET "updated_at" = '2015-09-28 14:22:35.233022' WHERE "baskets"."id" = 2
  [1m[36m (12.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mOrder Load (0.6ms)[0m  [1mSELECT  "orders".* FROM "orders"   ORDER BY created_at DESC LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "orders" ("address", "created_at", "email", "number", "ordered_on", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["created_at", "2015-09-28 14:22:35.411866"], ["email", "test1@test.com"], ["number", "R201530001"], ["ordered_on", "2015-09-28"], ["updated_at", "2015-09-28 14:22:35.411866"]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "baskets" SET "kori_id" = ?, "kori_type" = ?, "updated_at" = ? WHERE "baskets"."id" = 2[0m  [["kori_id", 2], ["kori_type", "Order"], ["updated_at", "2015-09-28 14:22:35.415236"]]
  [1m[35m (98.8ms)[0m  commit transaction
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-28 16:22:35 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-28 16:22:35 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-28 16:22:35 +0200
Started GET "/order" for 127.0.0.1 at 2015-09-28 16:22:36 +0200
Processing by ShopController#order as HTML
  [1m[36mOrder Load (0.4ms)[0m  [1mSELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 2]]
  Rendered shop/order.haml within layouts/application (33.6ms)
Completed 500 Internal Server Error in 110ms
  [1m[36mPurchase Load (0.2ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "products" ("cost", "created_at", "inventory", "link", "name", "price", "properties", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["cost", 5.0], ["created_at", "2015-09-28 14:23:40.826273"], ["inventory", 5], ["link", "product_1"], ["name", "product 1"], ["price", 10.0], ["properties", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["tax", 10.0], ["updated_at", "2015-09-28 14:23:40.826273"]]
  [1m[35m (16.4ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "baskets" ("created_at", "total_price", "total_tax", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-09-28 14:23:40.854238"], ["total_price", 10.0], ["total_tax", 0.91], ["updated_at", "2015-09-28 14:23:40.854238"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("basket_id", "created_at", "name", "price", "product_id", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["basket_id", 3], ["created_at", "2015-09-28 14:23:40.855437"], ["name", "product 1"], ["price", 10.0], ["product_id", 3], ["tax", 10.0], ["updated_at", "2015-09-28 14:23:40.855437"]]
  [1m[35mBasket Load (0.2ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 3]]
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items"  WHERE "items"."basket_id" = ?[0m  [["basket_id", 3]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "baskets" SET "updated_at" = '2015-09-28 14:23:40.859946' WHERE "baskets"."id" = 3
  [1m[36m (12.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
  [1m[36mOrder Load (0.6ms)[0m  [1mSELECT  "orders".* FROM "orders"   ORDER BY created_at DESC LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "orders" ("address", "created_at", "email", "number", "ordered_on", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["created_at", "2015-09-28 14:23:41.043733"], ["email", "test1@test.com"], ["number", "R201530002"], ["ordered_on", "2015-09-28"], ["updated_at", "2015-09-28 14:23:41.043733"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "baskets" SET "kori_id" = ?, "kori_type" = ?, "updated_at" = ? WHERE "baskets"."id" = 3[0m  [["kori_id", 3], ["kori_type", "Order"], ["updated_at", "2015-09-28 14:23:41.047744"]]
  [1m[35m (105.0ms)[0m  commit transaction
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-28 16:23:41 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-28 16:23:41 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-28 16:23:41 +0200
Started GET "/order" for 127.0.0.1 at 2015-09-28 16:23:41 +0200
Processing by ShopController#order as HTML
  [1m[36mOrder Load (0.4ms)[0m  [1mSELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 3]]
  Rendered shop/order.haml within layouts/application (14.2ms)
Completed 500 Internal Server Error in 57ms
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "products" ("cost", "created_at", "inventory", "link", "name", "price", "properties", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["cost", 5.0], ["created_at", "2015-09-28 14:24:08.640859"], ["inventory", 5], ["link", "product_1"], ["name", "product 1"], ["price", 10.0], ["properties", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["tax", 10.0], ["updated_at", "2015-09-28 14:24:08.640859"]]
  [1m[35m (56.2ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "baskets" ("created_at", "total_price", "total_tax", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-09-28 14:24:08.714170"], ["total_price", 10.0], ["total_tax", 0.91], ["updated_at", "2015-09-28 14:24:08.714170"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("basket_id", "created_at", "name", "price", "product_id", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["basket_id", 4], ["created_at", "2015-09-28 14:24:08.715335"], ["name", "product 1"], ["price", 10.0], ["product_id", 4], ["tax", 10.0], ["updated_at", "2015-09-28 14:24:08.715335"]]
  [1m[35mBasket Load (0.2ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 4]]
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items"  WHERE "items"."basket_id" = ?[0m  [["basket_id", 4]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "baskets" SET "updated_at" = '2015-09-28 14:24:08.719741' WHERE "baskets"."id" = 4
  [1m[36m (12.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mOrder Load (0.5ms)[0m  [1mSELECT  "orders".* FROM "orders"   ORDER BY created_at DESC LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("address", "created_at", "email", "number", "ordered_on", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["created_at", "2015-09-28 14:24:08.892051"], ["email", "test1@test.com"], ["number", "R201530003"], ["ordered_on", "2015-09-28"], ["updated_at", "2015-09-28 14:24:08.892051"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "baskets" SET "kori_id" = ?, "kori_type" = ?, "updated_at" = ? WHERE "baskets"."id" = 4[0m  [["kori_id", 4], ["kori_type", "Order"], ["updated_at", "2015-09-28 14:24:08.894026"]]
  [1m[35m (106.3ms)[0m  commit transaction
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-28 16:24:09 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-28 16:24:09 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-28 16:24:09 +0200
Started GET "/order" for 127.0.0.1 at 2015-09-28 16:24:09 +0200
Processing by ShopController#order as HTML
  [1m[36mOrder Load (0.5ms)[0m  [1mSELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 4]]
  [1m[35mBasket Load (0.2ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1  [["kori_id", 4], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_new.html.haml (36.0ms)
  Rendered shop/order.haml within layouts/application (76.8ms)
Completed 200 OK in 183ms (Views: 144.0ms | ActiveRecord: 1.2ms)
Started GET "/assets/application.css" for 127.0.0.1 at 2015-09-28 16:24:10 +0200
Started GET "/assets/application.js" for 127.0.0.1 at 2015-09-28 16:24:10 +0200
Started POST "/charges" for 127.0.0.1 at 2015-09-28 16:24:17 +0200
Processing by StripeClerk::ChargesController#create as HTML
  Parameters: {"utf8"=>"✓", "stripeToken"=>"tok_16q2Y6Bj62FxAyFmlFHgX32d", "stripeTokenType"=>"card", "stripeEmail"=>"user@example.com"}
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 4]]
  [1m[35mBasket Load (0.1ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1  [["kori_id", 4], ["kori_type", "Order"]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "orders" SET "address" = ?, "paid_on" = ?, "payment_info" = ?, "payment_type" = ?, "updated_at" = ? WHERE "orders"."id" = 4  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["paid_on", "2015-09-28"], ["payment_info", "ch_16q2YABj62FxAyFmM73JfXth"], ["payment_type", "stripe"], ["updated_at", "2015-09-28 14:24:19.458087"]]
  [1m[36m (54.0ms)[0m  [1mcommit transaction[0m
Redirected to http://127.0.0.1:49100/order
Completed 302 Found in 2236ms (ActiveRecord: 55.1ms)
Started GET "/order" for 127.0.0.1 at 2015-09-28 16:24:19 +0200
Processing by ShopController#order as HTML
  [1m[35mOrder Load (0.1ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 4]]
  [1m[36mBasket Load (0.1ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 4], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_show.html.haml (3.0ms)
  Rendered shop/order.haml within layouts/application (25.3ms)
Completed 200 OK in 28ms (Views: 25.9ms | ActiveRecord: 0.2ms)
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "products" ("cost", "created_at", "inventory", "link", "name", "price", "properties", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["cost", 5.0], ["created_at", "2015-09-28 14:25:28.193913"], ["inventory", 5], ["link", "product_1"], ["name", "product 1"], ["price", 10.0], ["properties", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["tax", 10.0], ["updated_at", "2015-09-28 14:25:28.193913"]]
  [1m[35m (58.2ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "baskets" ("created_at", "total_price", "total_tax", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-09-28 14:25:28.267580"], ["total_price", 10.0], ["total_tax", 0.91], ["updated_at", "2015-09-28 14:25:28.267580"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("basket_id", "created_at", "name", "price", "product_id", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["basket_id", 5], ["created_at", "2015-09-28 14:25:28.269552"], ["name", "product 1"], ["price", 10.0], ["product_id", 5], ["tax", 10.0], ["updated_at", "2015-09-28 14:25:28.269552"]]
  [1m[35mBasket Load (0.2ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 5]]
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items"  WHERE "items"."basket_id" = ?[0m  [["basket_id", 5]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "baskets" SET "updated_at" = '2015-09-28 14:25:28.274701' WHERE "baskets"."id" = 5
  [1m[36m (12.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mOrder Load (0.6ms)[0m  [1mSELECT  "orders".* FROM "orders"   ORDER BY created_at DESC LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "orders" ("address", "created_at", "email", "number", "ordered_on", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["created_at", "2015-09-28 14:25:28.486953"], ["email", "test1@test.com"], ["number", "R201530004"], ["ordered_on", "2015-09-28"], ["updated_at", "2015-09-28 14:25:28.486953"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "baskets" SET "kori_id" = ?, "kori_type" = ?, "updated_at" = ? WHERE "baskets"."id" = 5[0m  [["kori_id", 5], ["kori_type", "Order"], ["updated_at", "2015-09-28 14:25:28.489644"]]
  [1m[35m (98.0ms)[0m  commit transaction
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-28 16:25:28 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-28 16:25:28 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-28 16:25:28 +0200
Started GET "/order" for 127.0.0.1 at 2015-09-28 16:25:28 +0200
Processing by ShopController#order as HTML
  [1m[36mOrder Load (0.4ms)[0m  [1mSELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 5]]
  [1m[35mBasket Load (0.2ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1  [["kori_id", 5], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_new.html.haml (11.3ms)
  Rendered shop/order.haml within layouts/application (17.7ms)
Completed 200 OK in 64ms (Views: 25.1ms | ActiveRecord: 1.1ms)
Started GET "/assets/application.css" for 127.0.0.1 at 2015-09-28 16:25:29 +0200
Started GET "/assets/application.js" for 127.0.0.1 at 2015-09-28 16:25:29 +0200
Started POST "/charges" for 127.0.0.1 at 2015-09-28 16:25:34 +0200
Processing by StripeClerk::ChargesController#create as HTML
  Parameters: {"utf8"=>"✓", "stripeToken"=>"tok_16q2ZLBj62FxAyFmDvCzowpw", "stripeTokenType"=>"card", "stripeEmail"=>"user@example.com"}
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 5]]
  [1m[35mBasket Load (0.2ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1  [["kori_id", 5], ["kori_type", "Order"]]
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "orders" SET "address" = ?, "paid_on" = ?, "payment_info" = ?, "payment_type" = ?, "updated_at" = ? WHERE "orders"."id" = 5  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["paid_on", "2015-09-28"], ["payment_info", "ch_16q2ZPBj62FxAyFmPh2sUkS2"], ["payment_type", "stripe"], ["updated_at", "2015-09-28 14:25:36.507978"]]
  [1m[36m (73.7ms)[0m  [1mcommit transaction[0m
Redirected to http://127.0.0.1:50324/order
Completed 302 Found in 2201ms (ActiveRecord: 75.5ms)
Started GET "/order" for 127.0.0.1 at 2015-09-28 16:25:36 +0200
Processing by ShopController#order as HTML
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 5]]
  [1m[36mBasket Load (0.5ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 5], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_show.html.haml (4.3ms)
  Rendered shop/order.haml within layouts/application (6.2ms)
Completed 200 OK in 10ms (Views: 7.3ms | ActiveRecord: 0.7ms)
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "products" ("cost", "created_at", "inventory", "link", "name", "price", "properties", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["cost", 5.0], ["created_at", "2015-09-29 08:50:49.829135"], ["inventory", 5], ["link", "product_1"], ["name", "product 1"], ["price", 10.0], ["properties", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["tax", 10.0], ["updated_at", "2015-09-29 08:50:49.829135"]]
  [1m[35m (16.1ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "baskets" ("created_at", "total_price", "total_tax", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-09-29 08:50:49.866493"], ["total_price", 10.0], ["total_tax", 0.91], ["updated_at", "2015-09-29 08:50:49.866493"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("basket_id", "created_at", "name", "price", "product_id", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["basket_id", 6], ["created_at", "2015-09-29 08:50:49.867724"], ["name", "product 1"], ["price", 10.0], ["product_id", 6], ["tax", 10.0], ["updated_at", "2015-09-29 08:50:49.867724"]]
  [1m[35mBasket Load (0.2ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 6]]
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items"  WHERE "items"."basket_id" = ?[0m  [["basket_id", 6]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "baskets" SET "updated_at" = '2015-09-29 08:50:49.871966' WHERE "baskets"."id" = 6
  [1m[36m (13.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mOrder Load (0.7ms)[0m  [1mSELECT  "orders".* FROM "orders"   ORDER BY created_at DESC LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "orders" ("address", "created_at", "email", "number", "ordered_on", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["created_at", "2015-09-29 08:50:50.142212"], ["email", "test1@test.com"], ["number", "R201530005"], ["ordered_on", "2015-09-29"], ["updated_at", "2015-09-29 08:50:50.142212"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "baskets" SET "kori_id" = ?, "kori_type" = ?, "updated_at" = ? WHERE "baskets"."id" = 6[0m  [["kori_id", 6], ["kori_type", "Order"], ["updated_at", "2015-09-29 08:50:50.146321"]]
  [1m[35m (115.7ms)[0m  commit transaction
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-29 10:50:50 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-29 10:50:50 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-29 10:50:50 +0200
Started GET "/order" for 127.0.0.1 at 2015-09-29 10:50:50 +0200
Processing by ShopController#order as HTML
  [1m[36mOrder Load (0.5ms)[0m  [1mSELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 6]]
  [1m[35mBasket Load (0.1ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1  [["kori_id", 6], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_new.html.haml (23.6ms)
  Rendered shop/order.haml within layouts/application (47.2ms)
Completed 200 OK in 380ms (Views: 62.2ms | ActiveRecord: 1.0ms)
Started GET "/assets/application.css" for 127.0.0.1 at 2015-09-29 10:50:51 +0200
Started GET "/assets/application.js" for 127.0.0.1 at 2015-09-29 10:50:51 +0200
Started POST "/charges" for 127.0.0.1 at 2015-09-29 10:50:56 +0200
Processing by StripeClerk::ChargesController#create as HTML
  Parameters: {"utf8"=>"✓", "stripeToken"=>"tok_16qJp3Bj62FxAyFmjY6JMq7W", "stripeTokenType"=>"card", "stripeEmail"=>"user@example.com"}
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 6]]
  [1m[35mBasket Load (0.1ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1  [["kori_id", 6], ["kori_type", "Order"]]
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "address" = ?, "paid_on" = ?, "payment_info" = ?, "payment_type" = ?, "updated_at" = ? WHERE "orders"."id" = 6  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["paid_on", "2015-09-29"], ["payment_info", "ch_16qJp8Bj62FxAyFmDF1o3NeG"], ["payment_type", "stripe"], ["updated_at", "2015-09-29 08:50:58.970018"]]
  [1m[36m (77.0ms)[0m  [1mcommit transaction[0m
Redirected to http://127.0.0.1:40062/order
Completed 302 Found in 2293ms (ActiveRecord: 77.8ms)
Started GET "/order" for 127.0.0.1 at 2015-09-29 10:50:59 +0200
Processing by ShopController#order as HTML
  [1m[35mOrder Load (0.1ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 6]]
  [1m[36mBasket Load (0.1ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 6], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_show.html.haml (2.6ms)
  Rendered shop/order.haml within layouts/application (44.9ms)
Completed 200 OK in 47ms (Views: 45.4ms | ActiveRecord: 0.2ms)
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[35mClerk Load (0.1ms)[0m  SELECT  "clerks".* FROM "clerks"   ORDER BY "clerks"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mClerk Exists (0.1ms)[0m  SELECT  1 AS one FROM "clerks"  WHERE "clerks"."email" = 'test1@test.com' LIMIT 1
Binary data inserted for `string` type on column `password_salt`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "clerks" ("address", "created_at", "email", "encrypted_password", "password_salt", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname: Test Clerk1\n"], ["created_at", "2015-09-29 09:04:32.199604"], ["email", "test1@test.com"], ["encrypted_password", "7953f877414cc613f4d96e6d0c51c1964c0bcf370a1ab49ee76ff1e649bb0f33cd35c8ea1d47f3dbc6dc216ba1d05d4d1d6113e24da4af9b82be738bba18a549"], ["password_salt", "$2a$10$g1d5ui8CrmnKT4Wqez/1W."], ["updated_at", "2015-09-29 09:04:32.199604"]]
  [1m[35m (15.4ms)[0m  commit transaction
Started GET "/sign_in" for 127.0.0.1 at 2015-09-29 11:04:32 +0200
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "products" ("cost", "created_at", "inventory", "link", "name", "price", "properties", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["cost", 5.0], ["created_at", "2015-09-29 09:04:32.754887"], ["inventory", 5], ["link", "product_1"], ["name", "product 1"], ["price", 10.0], ["properties", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["tax", 10.0], ["updated_at", "2015-09-29 09:04:32.754887"]]
  [1m[36m (140.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "baskets" ("created_at", "total_price", "total_tax", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-09-29 09:04:32.910349"], ["total_price", 10.0], ["total_tax", 0.91], ["updated_at", "2015-09-29 09:04:32.910349"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("basket_id", "created_at", "name", "price", "product_id", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["basket_id", 7], ["created_at", "2015-09-29 09:04:32.911494"], ["name", "product 1"], ["price", 10.0], ["product_id", 7], ["tax", 10.0], ["updated_at", "2015-09-29 09:04:32.911494"]]
  [1m[36mBasket Load (0.1ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 7]]
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items"  WHERE "items"."basket_id" = ?  [["basket_id", 7]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "baskets" SET "updated_at" = '2015-09-29 09:04:32.914136' WHERE "baskets"."id" = 7[0m
  [1m[35m (12.8ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.7ms)[0m  SELECT  "orders".* FROM "orders"   ORDER BY created_at DESC LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("address", "created_at", "email", "number", "ordered_on", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["created_at", "2015-09-29 09:04:33.027725"], ["email", "test1@test.com"], ["number", "R201530006"], ["ordered_on", "2015-09-29"], ["updated_at", "2015-09-29 09:04:33.027725"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "baskets" SET "kori_id" = ?, "kori_type" = ?, "updated_at" = ? WHERE "baskets"."id" = 7  [["kori_id", 7], ["kori_type", "Order"], ["updated_at", "2015-09-29 09:04:33.030623"]]
  [1m[36m (91.4ms)[0m  [1mcommit transaction[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-29 11:04:33 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-29 11:04:33 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-29 11:04:33 +0200
Started GET "/order" for 127.0.0.1 at 2015-09-29 11:04:33 +0200
Processing by ShopController#order as HTML
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 7]]
  [1m[36mBasket Load (0.2ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 7], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_new.html.haml (12.8ms)
  Rendered shop/order.haml within layouts/application (17.8ms)
Completed 200 OK in 56ms (Views: 23.7ms | ActiveRecord: 0.5ms)
Started GET "/assets/application.css" for 127.0.0.1 at 2015-09-29 11:04:33 +0200
Started GET "/assets/application.js" for 127.0.0.1 at 2015-09-29 11:04:33 +0200
Started POST "/charges" for 127.0.0.1 at 2015-09-29 11:04:38 +0200
Processing by StripeClerk::ChargesController#create as HTML
  Parameters: {"utf8"=>"✓", "stripeToken"=>"tok_16qK2KBj62FxAyFmKBq6FWxw", "stripeTokenType"=>"card", "stripeEmail"=>"user@example.com"}
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 7]]
  [1m[36mBasket Load (0.2ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 7], ["kori_type", "Order"]]
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "orders" SET "address" = ?, "paid_on" = ?, "payment_info" = ?, "payment_type" = ?, "updated_at" = ? WHERE "orders"."id" = 7[0m  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["paid_on", "2015-09-29"], ["payment_info", "ch_16qK2OBj62FxAyFm4EOZBUAM"], ["payment_type", "stripe"], ["updated_at", "2015-09-29 09:04:41.040917"]]
  [1m[35m (15.3ms)[0m  commit transaction
Redirected to http://127.0.0.1:60062/order
Completed 302 Found in 2156ms (ActiveRecord: 16.9ms)
Started GET "/order" for 127.0.0.1 at 2015-09-29 11:04:41 +0200
Processing by ShopController#order as HTML
  [1m[36mOrder Load (0.2ms)[0m  [1mSELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 7]]
  [1m[35mBasket Load (0.1ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1  [["kori_id", 7], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_show.html.haml (4.1ms)
  Rendered shop/order.haml within layouts/application (5.7ms)
Completed 200 OK in 10ms (Views: 6.7ms | ActiveRecord: 0.3ms)
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[35mClerk Load (0.2ms)[0m  SELECT  "clerks".* FROM "clerks"   ORDER BY "clerks"."id" ASC LIMIT 1
Started GET "/sign_in" for 127.0.0.1 at 2015-09-29 11:07:28 +0200
Processing by SessionsController#sign_in as HTML
  Rendered /home/ana/.rvm/gems/ruby-2.2.1/bundler/gems/office_clerk-68c3fbd6c683/app/views/sessions/sign_in.haml within layouts/application (49.1ms)
Completed 200 OK in 63ms (Views: 62.9ms | ActiveRecord: 0.0ms)
Started GET "/assets/application.css" for 127.0.0.1 at 2015-09-29 11:07:28 +0200
Started GET "/assets/application.js" for 127.0.0.1 at 2015-09-29 11:07:28 +0200
Started POST "/create_session" for 127.0.0.1 at 2015-09-29 11:07:28 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "email"=>"test1@test.com", "password"=>"[FILTERED]", "commit"=>"Kirjaudu sisään"}
  [1m[36mClerk Load (0.2ms)[0m  [1mSELECT  "clerks".* FROM "clerks"  WHERE "clerks"."email" = 'test1@test.com'  ORDER BY "clerks"."id" ASC LIMIT 1[0m
Completed 500 Internal Server Error in 16ms
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "products" ("cost", "created_at", "inventory", "link", "name", "price", "properties", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["cost", 5.0], ["created_at", "2015-09-29 09:07:29.039824"], ["inventory", 5], ["link", "product_1"], ["name", "product 1"], ["price", 10.0], ["properties", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["tax", 10.0], ["updated_at", "2015-09-29 09:07:29.039824"]]
  [1m[35m (27.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "baskets" ("created_at", "total_price", "total_tax", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-09-29 09:07:29.078283"], ["total_price", 10.0], ["total_tax", 0.91], ["updated_at", "2015-09-29 09:07:29.078283"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("basket_id", "created_at", "name", "price", "product_id", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["basket_id", 8], ["created_at", "2015-09-29 09:07:29.079348"], ["name", "product 1"], ["price", 10.0], ["product_id", 8], ["tax", 10.0], ["updated_at", "2015-09-29 09:07:29.079348"]]
  [1m[35mBasket Load (0.1ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 8]]
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items"  WHERE "items"."basket_id" = ?[0m  [["basket_id", 8]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "baskets" SET "updated_at" = '2015-09-29 09:07:29.082026' WHERE "baskets"."id" = 8
  [1m[36m (12.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mOrder Load (0.5ms)[0m  [1mSELECT  "orders".* FROM "orders"   ORDER BY created_at DESC LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "orders" ("address", "created_at", "email", "number", "ordered_on", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["created_at", "2015-09-29 09:07:29.296955"], ["email", "test1@test.com"], ["number", "R201530007"], ["ordered_on", "2015-09-29"], ["updated_at", "2015-09-29 09:07:29.296955"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "baskets" SET "kori_id" = ?, "kori_type" = ?, "updated_at" = ? WHERE "baskets"."id" = 8[0m  [["kori_id", 8], ["kori_type", "Order"], ["updated_at", "2015-09-29 09:07:29.301261"]]
  [1m[35m (13.0ms)[0m  commit transaction
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-29 11:07:29 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-29 11:07:29 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-29 11:07:29 +0200
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[35mClerk Load (0.1ms)[0m  SELECT  "clerks".* FROM "clerks"   ORDER BY "clerks"."id" ASC LIMIT 1
Started GET "/sign_in" for 127.0.0.1 at 2015-09-29 11:10:20 +0200
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "products" ("cost", "created_at", "inventory", "link", "name", "price", "properties", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["cost", 5.0], ["created_at", "2015-09-29 09:10:20.500322"], ["inventory", 5], ["link", "product_1"], ["name", "product 1"], ["price", 10.0], ["properties", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["tax", 10.0], ["updated_at", "2015-09-29 09:10:20.500322"]]
  [1m[36m (16.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "baskets" ("created_at", "total_price", "total_tax", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-09-29 09:10:20.528567"], ["total_price", 10.0], ["total_tax", 0.91], ["updated_at", "2015-09-29 09:10:20.528567"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("basket_id", "created_at", "name", "price", "product_id", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["basket_id", 9], ["created_at", "2015-09-29 09:10:20.530232"], ["name", "product 1"], ["price", 10.0], ["product_id", 9], ["tax", 10.0], ["updated_at", "2015-09-29 09:10:20.530232"]]
  [1m[36mBasket Load (0.2ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 9]]
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items"  WHERE "items"."basket_id" = ?  [["basket_id", 9]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "baskets" SET "updated_at" = '2015-09-29 09:10:20.533932' WHERE "baskets"."id" = 9[0m
  [1m[35m (13.2ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.7ms)[0m  SELECT  "orders".* FROM "orders"   ORDER BY created_at DESC LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "orders" ("address", "created_at", "email", "number", "ordered_on", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["created_at", "2015-09-29 09:10:20.760424"], ["email", "test1@test.com"], ["number", "R201530008"], ["ordered_on", "2015-09-29"], ["updated_at", "2015-09-29 09:10:20.760424"]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "baskets" SET "kori_id" = ?, "kori_type" = ?, "updated_at" = ? WHERE "baskets"."id" = 9  [["kori_id", 9], ["kori_type", "Order"], ["updated_at", "2015-09-29 09:10:20.765266"]]
  [1m[36m (47.2ms)[0m  [1mcommit transaction[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-29 11:10:20 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-29 11:10:20 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-29 11:10:20 +0200
Started GET "/order" for 127.0.0.1 at 2015-09-29 11:10:21 +0200
Processing by ShopController#order as HTML
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 9]]
  [1m[36mBasket Load (0.2ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 9], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_new.html.haml (9.4ms)
  Rendered shop/order.haml within layouts/application (14.5ms)
Completed 200 OK in 51ms (Views: 20.3ms | ActiveRecord: 0.5ms)
Started GET "/assets/application.js" for 127.0.0.1 at 2015-09-29 11:10:21 +0200
Started GET "/assets/application.css" for 127.0.0.1 at 2015-09-29 11:10:21 +0200
Started POST "/charges" for 127.0.0.1 at 2015-09-29 11:10:26 +0200
Processing by StripeClerk::ChargesController#create as HTML
  Parameters: {"utf8"=>"✓", "stripeToken"=>"tok_16qK7wBj62FxAyFmwUIs54eJ", "stripeTokenType"=>"card", "stripeEmail"=>"user@example.com"}
  [1m[35mOrder Load (0.1ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 9]]
  [1m[36mBasket Load (0.1ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 9], ["kori_type", "Order"]]
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "orders" SET "address" = ?, "paid_on" = ?, "payment_info" = ?, "payment_type" = ?, "updated_at" = ? WHERE "orders"."id" = 9[0m  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["paid_on", "2015-09-29"], ["payment_info", "ch_16qK80Bj62FxAyFmmi8QsWSZ"], ["payment_type", "stripe"], ["updated_at", "2015-09-29 09:10:28.888418"]]
  [1m[35m (29.1ms)[0m  commit transaction
Redirected to http://127.0.0.1:40774/order
Completed 302 Found in 2084ms (ActiveRecord: 30.2ms)
Started GET "/order" for 127.0.0.1 at 2015-09-29 11:10:28 +0200
Processing by ShopController#order as HTML
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 9]]
  [1m[35mBasket Load (0.2ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1  [["kori_id", 9], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_show.html.haml (5.5ms)
  Rendered shop/order.haml within layouts/application (7.5ms)
Completed 200 OK in 10ms (Views: 8.3ms | ActiveRecord: 0.3ms)
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[35mClerk Load (0.1ms)[0m  SELECT  "clerks".* FROM "clerks"   ORDER BY "clerks"."id" ASC LIMIT 1
Started GET "/sign_in" for 127.0.0.1 at 2015-09-29 11:16:31 +0200
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "products" ("cost", "created_at", "inventory", "link", "name", "price", "properties", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["cost", 5.0], ["created_at", "2015-09-29 09:16:31.601014"], ["inventory", 5], ["link", "product_1"], ["name", "product 1"], ["price", 10.0], ["properties", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["tax", 10.0], ["updated_at", "2015-09-29 09:16:31.601014"]]
  [1m[36m (63.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "baskets" ("created_at", "total_price", "total_tax", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-09-29 09:16:31.677225"], ["total_price", 10.0], ["total_tax", 0.91], ["updated_at", "2015-09-29 09:16:31.677225"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("basket_id", "created_at", "name", "price", "product_id", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["basket_id", 10], ["created_at", "2015-09-29 09:16:31.678761"], ["name", "product 1"], ["price", 10.0], ["product_id", 10], ["tax", 10.0], ["updated_at", "2015-09-29 09:16:31.678761"]]
  [1m[36mBasket Load (0.2ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 10]]
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items"  WHERE "items"."basket_id" = ?  [["basket_id", 10]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "baskets" SET "updated_at" = '2015-09-29 09:16:31.682826' WHERE "baskets"."id" = 10[0m
  [1m[35m (12.8ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.6ms)[0m  SELECT  "orders".* FROM "orders"   ORDER BY created_at DESC LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "orders" ("address", "created_at", "email", "number", "ordered_on", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["created_at", "2015-09-29 09:16:31.882438"], ["email", "test1@test.com"], ["number", "R201530009"], ["ordered_on", "2015-09-29"], ["updated_at", "2015-09-29 09:16:31.882438"]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "baskets" SET "kori_id" = ?, "kori_type" = ?, "updated_at" = ? WHERE "baskets"."id" = 10  [["kori_id", 10], ["kori_type", "Order"], ["updated_at", "2015-09-29 09:16:31.885471"]]
  [1m[36m (79.6ms)[0m  [1mcommit transaction[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-29 11:16:31 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-29 11:16:32 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-29 11:16:32 +0200
Started GET "/order" for 127.0.0.1 at 2015-09-29 11:16:32 +0200
Processing by ShopController#order as HTML
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 10]]
  [1m[36mBasket Load (0.1ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 10], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_new.html.haml (9.5ms)
  Rendered shop/order.haml within layouts/application (15.0ms)
Completed 200 OK in 49ms (Views: 20.9ms | ActiveRecord: 0.5ms)
Started GET "/assets/application.css" for 127.0.0.1 at 2015-09-29 11:16:32 +0200
Started GET "/assets/application.js" for 127.0.0.1 at 2015-09-29 11:16:32 +0200
Started POST "/charges" for 127.0.0.1 at 2015-09-29 11:16:38 +0200
Processing by StripeClerk::ChargesController#create as HTML
  Parameters: {"utf8"=>"✓", "stripeToken"=>"tok_16qKDvBj62FxAyFmvI7FXDB2", "stripeTokenType"=>"card", "stripeEmail"=>"user@example.com"}
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 10]]
  [1m[36mBasket Load (0.1ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 10], ["kori_type", "Order"]]
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "orders" SET "address" = ?, "paid_on" = ?, "payment_info" = ?, "payment_type" = ?, "updated_at" = ? WHERE "orders"."id" = 10[0m  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["paid_on", "2015-09-29"], ["payment_info", "ch_16qKE0Bj62FxAyFmkCpl4EyL"], ["payment_type", "stripe"], ["updated_at", "2015-09-29 09:16:40.306347"]]
  [1m[35m (71.7ms)[0m  commit transaction
Redirected to http://127.0.0.1:53185/order
Completed 302 Found in 2091ms (ActiveRecord: 73.3ms)
Started GET "/order" for 127.0.0.1 at 2015-09-29 11:16:40 +0200
Processing by ShopController#order as HTML
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 10]]
  [1m[35mBasket Load (0.1ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1  [["kori_id", 10], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_show.html.haml (2.4ms)
  Rendered shop/order.haml within layouts/application (6.1ms)
Completed 200 OK in 11ms (Views: 7.0ms | ActiveRecord: 0.4ms)
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[35mClerk Load (0.1ms)[0m  SELECT  "clerks".* FROM "clerks"   ORDER BY "clerks"."id" ASC LIMIT 1
Started GET "/sign_in" for 127.0.0.1 at 2015-09-29 11:18:16 +0200
Processing by SessionsController#sign_in as HTML
  Rendered /home/ana/.rvm/gems/ruby-2.2.1/bundler/gems/office_clerk-68c3fbd6c683/app/views/sessions/sign_in.haml within layouts/application (34.8ms)
Completed 200 OK in 42ms (Views: 41.7ms | ActiveRecord: 0.0ms)
Started GET "/assets/application.css" for 127.0.0.1 at 2015-09-29 11:18:16 +0200
Started GET "/assets/application.js" for 127.0.0.1 at 2015-09-29 11:18:16 +0200
Started POST "/create_session" for 127.0.0.1 at 2015-09-29 11:18:17 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "email"=>"test1@test.com", "password"=>"[FILTERED]", "commit"=>"Kirjaudu sisään"}
  [1m[36mClerk Load (0.2ms)[0m  [1mSELECT  "clerks".* FROM "clerks"  WHERE "clerks"."email" = 'test1@test.com'  ORDER BY "clerks"."id" ASC LIMIT 1[0m
Completed 500 Internal Server Error in 14ms
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "products" ("cost", "created_at", "inventory", "link", "name", "price", "properties", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["cost", 5.0], ["created_at", "2015-09-29 09:18:17.231562"], ["inventory", 5], ["link", "product_1"], ["name", "product 1"], ["price", 10.0], ["properties", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["tax", 10.0], ["updated_at", "2015-09-29 09:18:17.231562"]]
  [1m[35m (52.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "baskets" ("created_at", "total_price", "total_tax", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-09-29 09:18:17.299241"], ["total_price", 10.0], ["total_tax", 0.91], ["updated_at", "2015-09-29 09:18:17.299241"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("basket_id", "created_at", "name", "price", "product_id", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["basket_id", 11], ["created_at", "2015-09-29 09:18:17.300282"], ["name", "product 1"], ["price", 10.0], ["product_id", 11], ["tax", 10.0], ["updated_at", "2015-09-29 09:18:17.300282"]]
  [1m[35mBasket Load (0.1ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 11]]
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items"  WHERE "items"."basket_id" = ?[0m  [["basket_id", 11]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "baskets" SET "updated_at" = '2015-09-29 09:18:17.302911' WHERE "baskets"."id" = 11
  [1m[36m (13.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mOrder Load (0.7ms)[0m  [1mSELECT  "orders".* FROM "orders"   ORDER BY created_at DESC LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "orders" ("address", "created_at", "email", "number", "ordered_on", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["created_at", "2015-09-29 09:18:17.520195"], ["email", "test1@test.com"], ["number", "R201530010"], ["ordered_on", "2015-09-29"], ["updated_at", "2015-09-29 09:18:17.520195"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "baskets" SET "kori_id" = ?, "kori_type" = ?, "updated_at" = ? WHERE "baskets"."id" = 11[0m  [["kori_id", 11], ["kori_type", "Order"], ["updated_at", "2015-09-29 09:18:17.524162"]]
  [1m[35m (66.6ms)[0m  commit transaction
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-29 11:18:17 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-29 11:18:17 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-29 11:18:17 +0200
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[35mClerk Load (0.1ms)[0m  SELECT  "clerks".* FROM "clerks"   ORDER BY "clerks"."id" ASC LIMIT 1
Started GET "/sign_in" for 127.0.0.1 at 2015-09-29 11:19:23 +0200
Processing by SessionsController#sign_in as HTML
  Rendered /home/ana/.rvm/gems/ruby-2.2.1/bundler/gems/office_clerk-68c3fbd6c683/app/views/sessions/sign_in.haml within layouts/application (35.0ms)
Completed 200 OK in 42ms (Views: 42.0ms | ActiveRecord: 0.0ms)
Started GET "/assets/application.css" for 127.0.0.1 at 2015-09-29 11:19:23 +0200
Started GET "/assets/application.js" for 127.0.0.1 at 2015-09-29 11:19:23 +0200
Started POST "/create_session" for 127.0.0.1 at 2015-09-29 11:19:23 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "email"=>"test1@test.com", "password"=>"[FILTERED]", "commit"=>"Kirjaudu sisään"}
  [1m[36mClerk Load (0.2ms)[0m  [1mSELECT  "clerks".* FROM "clerks"  WHERE "clerks"."email" = 'test1@test.com'  ORDER BY "clerks"."id" ASC LIMIT 1[0m
Completed 500 Internal Server Error in 17ms
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "products" ("cost", "created_at", "inventory", "link", "name", "price", "properties", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["cost", 5.0], ["created_at", "2015-09-29 09:19:23.812675"], ["inventory", 5], ["link", "product_1"], ["name", "product 1"], ["price", 10.0], ["properties", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["tax", 10.0], ["updated_at", "2015-09-29 09:19:23.812675"]]
  [1m[35m (63.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "baskets" ("created_at", "total_price", "total_tax", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-09-29 09:19:23.893771"], ["total_price", 10.0], ["total_tax", 0.91], ["updated_at", "2015-09-29 09:19:23.893771"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("basket_id", "created_at", "name", "price", "product_id", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["basket_id", 12], ["created_at", "2015-09-29 09:19:23.895605"], ["name", "product 1"], ["price", 10.0], ["product_id", 12], ["tax", 10.0], ["updated_at", "2015-09-29 09:19:23.895605"]]
  [1m[35mBasket Load (0.1ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 12]]
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items"  WHERE "items"."basket_id" = ?[0m  [["basket_id", 12]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "baskets" SET "updated_at" = '2015-09-29 09:19:23.899323' WHERE "baskets"."id" = 12
  [1m[36m (10.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mOrder Load (0.5ms)[0m  [1mSELECT  "orders".* FROM "orders"   ORDER BY created_at DESC LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "orders" ("address", "created_at", "email", "number", "ordered_on", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["created_at", "2015-09-29 09:19:24.197301"], ["email", "test1@test.com"], ["number", "R201530011"], ["ordered_on", "2015-09-29"], ["updated_at", "2015-09-29 09:19:24.197301"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "baskets" SET "kori_id" = ?, "kori_type" = ?, "updated_at" = ? WHERE "baskets"."id" = 12[0m  [["kori_id", 12], ["kori_type", "Order"], ["updated_at", "2015-09-29 09:19:24.199915"]]
  [1m[35m (77.9ms)[0m  commit transaction
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-29 11:19:24 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-29 11:19:24 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-29 11:19:24 +0200
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[35mClerk Load (0.1ms)[0m  SELECT  "clerks".* FROM "clerks"   ORDER BY "clerks"."id" ASC LIMIT 1
Started GET "/sign_in" for 127.0.0.1 at 2015-09-29 11:20:08 +0200
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "products" ("cost", "created_at", "inventory", "link", "name", "price", "properties", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["cost", 5.0], ["created_at", "2015-09-29 09:20:08.274831"], ["inventory", 5], ["link", "product_1"], ["name", "product 1"], ["price", 10.0], ["properties", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["tax", 10.0], ["updated_at", "2015-09-29 09:20:08.274831"]]
  [1m[36m (12.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "baskets" ("created_at", "total_price", "total_tax", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-09-29 09:20:08.298156"], ["total_price", 10.0], ["total_tax", 0.91], ["updated_at", "2015-09-29 09:20:08.298156"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("basket_id", "created_at", "name", "price", "product_id", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["basket_id", 13], ["created_at", "2015-09-29 09:20:08.299214"], ["name", "product 1"], ["price", 10.0], ["product_id", 13], ["tax", 10.0], ["updated_at", "2015-09-29 09:20:08.299214"]]
  [1m[36mBasket Load (0.1ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 13]]
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items"  WHERE "items"."basket_id" = ?  [["basket_id", 13]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "baskets" SET "updated_at" = '2015-09-29 09:20:08.301957' WHERE "baskets"."id" = 13[0m
  [1m[35m (12.8ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.9ms)[0m  SELECT  "orders".* FROM "orders"   ORDER BY created_at DESC LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "orders" ("address", "created_at", "email", "number", "ordered_on", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["created_at", "2015-09-29 09:20:08.522838"], ["email", "test1@test.com"], ["number", "R201530012"], ["ordered_on", "2015-09-29"], ["updated_at", "2015-09-29 09:20:08.522838"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "baskets" SET "kori_id" = ?, "kori_type" = ?, "updated_at" = ? WHERE "baskets"."id" = 13  [["kori_id", 13], ["kori_type", "Order"], ["updated_at", "2015-09-29 09:20:08.526641"]]
  [1m[36m (56.7ms)[0m  [1mcommit transaction[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-29 11:20:08 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-29 11:20:08 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-29 11:20:08 +0200
Started GET "/order" for 127.0.0.1 at 2015-09-29 11:20:08 +0200
Processing by ShopController#order as HTML
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 13]]
  [1m[36mBasket Load (0.2ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 13], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_new.html.haml (10.3ms)
  Rendered shop/order.haml within layouts/application (15.4ms)
Completed 200 OK in 50ms (Views: 21.6ms | ActiveRecord: 0.5ms)
Started GET "/assets/application.css" for 127.0.0.1 at 2015-09-29 11:20:08 +0200
Started GET "/assets/application.js" for 127.0.0.1 at 2015-09-29 11:20:08 +0200
Started POST "/charges" for 127.0.0.1 at 2015-09-29 11:20:14 +0200
Processing by StripeClerk::ChargesController#create as HTML
  Parameters: {"utf8"=>"✓", "stripeToken"=>"tok_16qKHPBj62FxAyFmDCGX89N8", "stripeTokenType"=>"card", "stripeEmail"=>"user@example.com"}
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 13]]
  [1m[36mBasket Load (0.2ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 13], ["kori_type", "Order"]]
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "orders" SET "address" = ?, "paid_on" = ?, "payment_info" = ?, "payment_type" = ?, "updated_at" = ? WHERE "orders"."id" = 13[0m  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["paid_on", "2015-09-29"], ["payment_info", "ch_16qKHUBj62FxAyFm3GhoW1IN"], ["payment_type", "stripe"], ["updated_at", "2015-09-29 09:20:16.490419"]]
  [1m[35m (100.0ms)[0m  commit transaction
Redirected to http://127.0.0.1:56220/order
Completed 302 Found in 2305ms (ActiveRecord: 101.8ms)
Started GET "/order" for 127.0.0.1 at 2015-09-29 11:20:16 +0200
Processing by ShopController#order as HTML
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 13]]
  [1m[35mBasket Load (0.1ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1  [["kori_id", 13], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_show.html.haml (2.3ms)
  Rendered shop/order.haml within layouts/application (3.7ms)
Completed 200 OK in 6ms (Views: 4.2ms | ActiveRecord: 0.2ms)
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[35mClerk Load (0.1ms)[0m  SELECT  "clerks".* FROM "clerks"   ORDER BY "clerks"."id" ASC LIMIT 1
Started GET "/sign_in" for 127.0.0.1 at 2015-09-29 11:24:07 +0200
Processing by SessionsController#sign_in as HTML
  Rendered /home/ana/.rvm/gems/ruby-2.2.1/bundler/gems/office_clerk-68c3fbd6c683/app/views/sessions/sign_in.haml within layouts/application (79.7ms)
Completed 500 Internal Server Error in 84ms
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "products" ("cost", "created_at", "inventory", "link", "name", "price", "properties", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["cost", 5.0], ["created_at", "2015-09-29 09:24:07.507091"], ["inventory", 5], ["link", "product_1"], ["name", "product 1"], ["price", 10.0], ["properties", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["tax", 10.0], ["updated_at", "2015-09-29 09:24:07.507091"]]
  [1m[36m (82.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "baskets" ("created_at", "total_price", "total_tax", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-09-29 09:24:07.605464"], ["total_price", 10.0], ["total_tax", 0.91], ["updated_at", "2015-09-29 09:24:07.605464"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("basket_id", "created_at", "name", "price", "product_id", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["basket_id", 14], ["created_at", "2015-09-29 09:24:07.606506"], ["name", "product 1"], ["price", 10.0], ["product_id", 14], ["tax", 10.0], ["updated_at", "2015-09-29 09:24:07.606506"]]
  [1m[36mBasket Load (0.1ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 14]]
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items"  WHERE "items"."basket_id" = ?  [["basket_id", 14]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "baskets" SET "updated_at" = '2015-09-29 09:24:07.609172' WHERE "baskets"."id" = 14[0m
  [1m[35m (9.5ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.5ms)[0m  SELECT  "orders".* FROM "orders"   ORDER BY created_at DESC LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "orders" ("address", "created_at", "email", "number", "ordered_on", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["created_at", "2015-09-29 09:24:07.911327"], ["email", "test1@test.com"], ["number", "R201530013"], ["ordered_on", "2015-09-29"], ["updated_at", "2015-09-29 09:24:07.911327"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "baskets" SET "kori_id" = ?, "kori_type" = ?, "updated_at" = ? WHERE "baskets"."id" = 14  [["kori_id", 14], ["kori_type", "Order"], ["updated_at", "2015-09-29 09:24:07.913782"]]
  [1m[36m (82.8ms)[0m  [1mcommit transaction[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-29 11:24:08 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-29 11:24:08 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-29 11:24:08 +0200
Started GET "/order" for 127.0.0.1 at 2015-09-29 11:24:08 +0200
Processing by ShopController#order as HTML
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 14]]
  [1m[36mBasket Load (0.1ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 14], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_new.html.haml (10.0ms)
  Rendered shop/order.haml within layouts/application (15.2ms)
Completed 200 OK in 21ms (Views: 19.1ms | ActiveRecord: 0.5ms)
Started GET "/assets/application.css" for 127.0.0.1 at 2015-09-29 11:24:08 +0200
Started GET "/assets/application.js" for 127.0.0.1 at 2015-09-29 11:24:08 +0200
Started POST "/charges" for 127.0.0.1 at 2015-09-29 11:24:14 +0200
Processing by StripeClerk::ChargesController#create as HTML
  Parameters: {"utf8"=>"✓", "stripeToken"=>"tok_16qKLHBj62FxAyFmQ3zCQwls", "stripeTokenType"=>"card", "stripeEmail"=>"user@example.com"}
  [1m[35mOrder Load (0.1ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 14]]
  [1m[36mBasket Load (0.1ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 14], ["kori_type", "Order"]]
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "orders" SET "address" = ?, "paid_on" = ?, "payment_info" = ?, "payment_type" = ?, "updated_at" = ? WHERE "orders"."id" = 14[0m  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["paid_on", "2015-09-29"], ["payment_info", "ch_16qKLMBj62FxAyFmuU0YCA1D"], ["payment_type", "stripe"], ["updated_at", "2015-09-29 09:24:16.326860"]]
  [1m[35m (84.6ms)[0m  commit transaction
Redirected to http://127.0.0.1:60991/order
Completed 302 Found in 2194ms (ActiveRecord: 86.3ms)
Started GET "/order" for 127.0.0.1 at 2015-09-29 11:24:16 +0200
Processing by ShopController#order as HTML
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 14]]
  [1m[35mBasket Load (0.1ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1  [["kori_id", 14], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_show.html.haml (2.1ms)
  Rendered shop/order.haml within layouts/application (3.2ms)
Completed 200 OK in 5ms (Views: 3.7ms | ActiveRecord: 0.2ms)
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[35mClerk Load (0.1ms)[0m  SELECT  "clerks".* FROM "clerks"   ORDER BY "clerks"."id" ASC LIMIT 1
Started GET "/sign_in" for 127.0.0.1 at 2015-09-29 11:26:17 +0200
Processing by SessionsController#sign_in as HTML
  Rendered /home/ana/.rvm/gems/ruby-2.2.1/bundler/gems/office_clerk-68c3fbd6c683/app/views/sessions/sign_in.haml within layouts/application (39.2ms)
Completed 500 Internal Server Error in 43ms
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "products" ("cost", "created_at", "inventory", "link", "name", "price", "properties", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["cost", 5.0], ["created_at", "2015-09-29 09:26:17.374639"], ["inventory", 5], ["link", "product_1"], ["name", "product 1"], ["price", 10.0], ["properties", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["tax", 10.0], ["updated_at", "2015-09-29 09:26:17.374639"]]
  [1m[36m (16.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "baskets" ("created_at", "total_price", "total_tax", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-09-29 09:26:17.409308"], ["total_price", 10.0], ["total_tax", 0.91], ["updated_at", "2015-09-29 09:26:17.409308"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("basket_id", "created_at", "name", "price", "product_id", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["basket_id", 15], ["created_at", "2015-09-29 09:26:17.410984"], ["name", "product 1"], ["price", 10.0], ["product_id", 15], ["tax", 10.0], ["updated_at", "2015-09-29 09:26:17.410984"]]
  [1m[36mBasket Load (0.2ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 15]]
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items"  WHERE "items"."basket_id" = ?  [["basket_id", 15]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "baskets" SET "updated_at" = '2015-09-29 09:26:17.415228' WHERE "baskets"."id" = 15[0m
  [1m[35m (11.5ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.7ms)[0m  SELECT  "orders".* FROM "orders"   ORDER BY created_at DESC LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("address", "created_at", "email", "number", "ordered_on", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["created_at", "2015-09-29 09:26:17.644483"], ["email", "test1@test.com"], ["number", "R201530014"], ["ordered_on", "2015-09-29"], ["updated_at", "2015-09-29 09:26:17.644483"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "baskets" SET "kori_id" = ?, "kori_type" = ?, "updated_at" = ? WHERE "baskets"."id" = 15  [["kori_id", 15], ["kori_type", "Order"], ["updated_at", "2015-09-29 09:26:17.646760"]]
  [1m[36m (51.4ms)[0m  [1mcommit transaction[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-29 11:26:17 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-29 11:26:17 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-29 11:26:17 +0200
Started GET "/order" for 127.0.0.1 at 2015-09-29 11:26:17 +0200
Processing by ShopController#order as HTML
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 15]]
  [1m[36mBasket Load (0.1ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 15], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_new.html.haml (9.3ms)
  Rendered shop/order.haml within layouts/application (13.3ms)
Completed 200 OK in 19ms (Views: 17.3ms | ActiveRecord: 0.5ms)
Started GET "/assets/application.js" for 127.0.0.1 at 2015-09-29 11:26:18 +0200
Started GET "/assets/application.css" for 127.0.0.1 at 2015-09-29 11:26:18 +0200
Started POST "/charges" for 127.0.0.1 at 2015-09-29 11:26:23 +0200
Processing by StripeClerk::ChargesController#create as HTML
  Parameters: {"utf8"=>"✓", "stripeToken"=>"tok_16qKNMBj62FxAyFmgoEx2x5A", "stripeTokenType"=>"card", "stripeEmail"=>"user@example.com"}
  [1m[35mOrder Load (0.1ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 15]]
  [1m[36mBasket Load (0.1ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 15], ["kori_type", "Order"]]
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "orders" SET "address" = ?, "paid_on" = ?, "payment_info" = ?, "payment_type" = ?, "updated_at" = ? WHERE "orders"."id" = 15[0m  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["paid_on", "2015-09-29"], ["payment_info", "ch_16qKNRBj62FxAyFmhdKo4AKp"], ["payment_type", "stripe"], ["updated_at", "2015-09-29 09:26:25.746657"]]
  [1m[35m (76.2ms)[0m  commit transaction
Redirected to http://127.0.0.1:55069/order
Completed 302 Found in 2363ms (ActiveRecord: 77.6ms)
Started GET "/order" for 127.0.0.1 at 2015-09-29 11:26:25 +0200
Processing by ShopController#order as HTML
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 15]]
  [1m[35mBasket Load (0.2ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1  [["kori_id", 15], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_show.html.haml (10.4ms)
  Rendered shop/order.haml within layouts/application (13.1ms)
Completed 200 OK in 16ms (Views: 13.8ms | ActiveRecord: 0.3ms)
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[35mClerk Load (0.1ms)[0m  SELECT  "clerks".* FROM "clerks"   ORDER BY "clerks"."id" ASC LIMIT 1
Started GET "/sign_in" for 127.0.0.1 at 2015-09-29 11:27:06 +0200
Processing by SessionsController#sign_in as HTML
Completed 500 Internal Server Error in 2ms
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "products" ("cost", "created_at", "inventory", "link", "name", "price", "properties", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["cost", 5.0], ["created_at", "2015-09-29 09:27:06.419850"], ["inventory", 5], ["link", "product_1"], ["name", "product 1"], ["price", 10.0], ["properties", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["tax", 10.0], ["updated_at", "2015-09-29 09:27:06.419850"]]
  [1m[36m (100.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "baskets" ("created_at", "total_price", "total_tax", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-09-29 09:27:06.536305"], ["total_price", 10.0], ["total_tax", 0.91], ["updated_at", "2015-09-29 09:27:06.536305"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("basket_id", "created_at", "name", "price", "product_id", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["basket_id", 16], ["created_at", "2015-09-29 09:27:06.537325"], ["name", "product 1"], ["price", 10.0], ["product_id", 16], ["tax", 10.0], ["updated_at", "2015-09-29 09:27:06.537325"]]
  [1m[36mBasket Load (0.1ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 16]]
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items"  WHERE "items"."basket_id" = ?  [["basket_id", 16]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "baskets" SET "updated_at" = '2015-09-29 09:27:06.539868' WHERE "baskets"."id" = 16[0m
  [1m[35m (11.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.8ms)[0m  SELECT  "orders".* FROM "orders"   ORDER BY created_at DESC LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "orders" ("address", "created_at", "email", "number", "ordered_on", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["created_at", "2015-09-29 09:27:06.718495"], ["email", "test1@test.com"], ["number", "R201530015"], ["ordered_on", "2015-09-29"], ["updated_at", "2015-09-29 09:27:06.718495"]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "baskets" SET "kori_id" = ?, "kori_type" = ?, "updated_at" = ? WHERE "baskets"."id" = 16  [["kori_id", 16], ["kori_type", "Order"], ["updated_at", "2015-09-29 09:27:06.722261"]]
  [1m[36m (102.6ms)[0m  [1mcommit transaction[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-29 11:27:06 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-29 11:27:06 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-29 11:27:07 +0200
Started GET "/order" for 127.0.0.1 at 2015-09-29 11:27:07 +0200
Processing by ShopController#order as HTML
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 16]]
  [1m[36mBasket Load (0.2ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 16], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_new.html.haml (9.6ms)
  Rendered shop/order.haml within layouts/application (14.4ms)
Completed 200 OK in 49ms (Views: 20.3ms | ActiveRecord: 0.5ms)
Started GET "/assets/application.css" for 127.0.0.1 at 2015-09-29 11:27:07 +0200
Started GET "/assets/application.js" for 127.0.0.1 at 2015-09-29 11:27:07 +0200
Started POST "/charges" for 127.0.0.1 at 2015-09-29 11:27:12 +0200
Processing by StripeClerk::ChargesController#create as HTML
  Parameters: {"utf8"=>"✓", "stripeToken"=>"tok_16qKO9Bj62FxAyFmI3hjHopU", "stripeTokenType"=>"card", "stripeEmail"=>"user@example.com"}
  [1m[35mOrder Load (0.1ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 16]]
  [1m[36mBasket Load (0.1ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 16], ["kori_type", "Order"]]
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "orders" SET "address" = ?, "paid_on" = ?, "payment_info" = ?, "payment_type" = ?, "updated_at" = ? WHERE "orders"."id" = 16[0m  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["paid_on", "2015-09-29"], ["payment_info", "ch_16qKOEBj62FxAyFmgO7QV1Zx"], ["payment_type", "stripe"], ["updated_at", "2015-09-29 09:27:14.719614"]]
  [1m[35m (88.4ms)[0m  commit transaction
Redirected to http://127.0.0.1:55880/order
Completed 302 Found in 2185ms (ActiveRecord: 89.9ms)
Started GET "/order" for 127.0.0.1 at 2015-09-29 11:27:14 +0200
Processing by ShopController#order as HTML
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 16]]
  [1m[35mBasket Load (0.1ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1  [["kori_id", 16], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_show.html.haml (2.5ms)
  Rendered shop/order.haml within layouts/application (3.8ms)
Completed 200 OK in 6ms (Views: 4.3ms | ActiveRecord: 0.2ms)
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[35mClerk Load (0.1ms)[0m  SELECT  "clerks".* FROM "clerks"   ORDER BY "clerks"."id" ASC LIMIT 1
Started GET "/sign_in" for 127.0.0.1 at 2015-09-29 11:27:43 +0200
Processing by SessionsController#sign_in as HTML
  Rendered /home/ana/.rvm/gems/ruby-2.2.1/bundler/gems/office_clerk-68c3fbd6c683/app/views/sessions/sign_in.haml within layouts/application (38.7ms)
Completed 500 Internal Server Error in 44ms
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "products" ("cost", "created_at", "inventory", "link", "name", "price", "properties", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["cost", 5.0], ["created_at", "2015-09-29 09:27:44.192049"], ["inventory", 5], ["link", "product_1"], ["name", "product 1"], ["price", 10.0], ["properties", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["tax", 10.0], ["updated_at", "2015-09-29 09:27:44.192049"]]
  [1m[36m (71.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "baskets" ("created_at", "total_price", "total_tax", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-09-29 09:27:44.273272"], ["total_price", 10.0], ["total_tax", 0.91], ["updated_at", "2015-09-29 09:27:44.273272"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("basket_id", "created_at", "name", "price", "product_id", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["basket_id", 17], ["created_at", "2015-09-29 09:27:44.274369"], ["name", "product 1"], ["price", 10.0], ["product_id", 17], ["tax", 10.0], ["updated_at", "2015-09-29 09:27:44.274369"]]
  [1m[36mBasket Load (0.1ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 17]]
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items"  WHERE "items"."basket_id" = ?  [["basket_id", 17]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "baskets" SET "updated_at" = '2015-09-29 09:27:44.276894' WHERE "baskets"."id" = 17[0m
  [1m[35m (9.5ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.4ms)[0m  SELECT  "orders".* FROM "orders"   ORDER BY created_at DESC LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "orders" ("address", "created_at", "email", "number", "ordered_on", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["created_at", "2015-09-29 09:27:44.457689"], ["email", "test1@test.com"], ["number", "R201530016"], ["ordered_on", "2015-09-29"], ["updated_at", "2015-09-29 09:27:44.457689"]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "baskets" SET "kori_id" = ?, "kori_type" = ?, "updated_at" = ? WHERE "baskets"."id" = 17  [["kori_id", 17], ["kori_type", "Order"], ["updated_at", "2015-09-29 09:27:44.461444"]]
  [1m[36m (17.9ms)[0m  [1mcommit transaction[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-29 11:27:44 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-29 11:27:44 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-29 11:27:44 +0200
Started GET "/order" for 127.0.0.1 at 2015-09-29 11:27:44 +0200
Processing by ShopController#order as HTML
  [1m[35mOrder Load (0.6ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 17]]
  [1m[36mBasket Load (0.2ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 17], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_new.html.haml (9.8ms)
  Rendered shop/order.haml within layouts/application (14.1ms)
Completed 200 OK in 24ms (Views: 19.5ms | ActiveRecord: 0.9ms)
Started GET "/assets/application.css" for 127.0.0.1 at 2015-09-29 11:27:44 +0200
Started GET "/assets/application.js" for 127.0.0.1 at 2015-09-29 11:27:44 +0200
Started POST "/charges" for 127.0.0.1 at 2015-09-29 11:27:50 +0200
Processing by StripeClerk::ChargesController#create as HTML
  Parameters: {"utf8"=>"✓", "stripeToken"=>"tok_16qKOlBj62FxAyFmjibT76g3", "stripeTokenType"=>"card", "stripeEmail"=>"user@example.com"}
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 17]]
  [1m[36mBasket Load (0.2ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 17], ["kori_type", "Order"]]
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "orders" SET "address" = ?, "paid_on" = ?, "payment_info" = ?, "payment_type" = ?, "updated_at" = ? WHERE "orders"."id" = 17[0m  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["paid_on", "2015-09-29"], ["payment_info", "ch_16qKOpBj62FxAyFm32coalGH"], ["payment_type", "stripe"], ["updated_at", "2015-09-29 09:27:52.100779"]]
  [1m[35m (12.1ms)[0m  commit transaction
Redirected to http://127.0.0.1:60147/order
Completed 302 Found in 2021ms (ActiveRecord: 13.4ms)
Started GET "/order" for 127.0.0.1 at 2015-09-29 11:27:52 +0200
Processing by ShopController#order as HTML
  [1m[36mOrder Load (0.2ms)[0m  [1mSELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 17]]
  [1m[35mBasket Load (0.1ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1  [["kori_id", 17], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_show.html.haml (2.6ms)
  Rendered shop/order.haml within layouts/application (3.9ms)
Completed 200 OK in 9ms (Views: 4.9ms | ActiveRecord: 0.3ms)
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[35mClerk Load (0.1ms)[0m  SELECT  "clerks".* FROM "clerks"   ORDER BY "clerks"."id" ASC LIMIT 1
Started GET "/sign_in" for 127.0.0.1 at 2015-09-29 11:29:00 +0200
Processing by SessionsController#sign_in as HTML
  Rendered /home/ana/.rvm/gems/ruby-2.2.1/bundler/gems/office_clerk-68c3fbd6c683/app/views/sessions/sign_in.haml within layouts/application (37.9ms)
Completed 500 Internal Server Error in 42ms
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "products" ("cost", "created_at", "inventory", "link", "name", "price", "properties", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["cost", 5.0], ["created_at", "2015-09-29 09:29:00.914480"], ["inventory", 5], ["link", "product_1"], ["name", "product 1"], ["price", 10.0], ["properties", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["tax", 10.0], ["updated_at", "2015-09-29 09:29:00.914480"]]
  [1m[36m (99.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "baskets" ("created_at", "total_price", "total_tax", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-09-29 09:29:01.024432"], ["total_price", 10.0], ["total_tax", 0.91], ["updated_at", "2015-09-29 09:29:01.024432"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("basket_id", "created_at", "name", "price", "product_id", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["basket_id", 18], ["created_at", "2015-09-29 09:29:01.025498"], ["name", "product 1"], ["price", 10.0], ["product_id", 18], ["tax", 10.0], ["updated_at", "2015-09-29 09:29:01.025498"]]
  [1m[36mBasket Load (0.1ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 18]]
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items"  WHERE "items"."basket_id" = ?  [["basket_id", 18]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "baskets" SET "updated_at" = '2015-09-29 09:29:01.028329' WHERE "baskets"."id" = 18[0m
  [1m[35m (11.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.7ms)[0m  SELECT  "orders".* FROM "orders"   ORDER BY created_at DESC LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "orders" ("address", "created_at", "email", "number", "ordered_on", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["created_at", "2015-09-29 09:29:01.305299"], ["email", "test1@test.com"], ["number", "R201530017"], ["ordered_on", "2015-09-29"], ["updated_at", "2015-09-29 09:29:01.305299"]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "baskets" SET "kori_id" = ?, "kori_type" = ?, "updated_at" = ? WHERE "baskets"."id" = 18  [["kori_id", 18], ["kori_type", "Order"], ["updated_at", "2015-09-29 09:29:01.309077"]]
  [1m[36m (97.4ms)[0m  [1mcommit transaction[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-29 11:29:01 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-29 11:29:01 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-29 11:29:01 +0200
Started GET "/order" for 127.0.0.1 at 2015-09-29 11:29:01 +0200
Processing by ShopController#order as HTML
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 18]]
  [1m[36mBasket Load (0.2ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 18], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_new.html.haml (9.1ms)
  Rendered shop/order.haml within layouts/application (14.0ms)
Completed 200 OK in 20ms (Views: 18.1ms | ActiveRecord: 0.5ms)
Started GET "/assets/application.css" for 127.0.0.1 at 2015-09-29 11:29:01 +0200
Started GET "/assets/application.js" for 127.0.0.1 at 2015-09-29 11:29:01 +0200
Started POST "/charges" for 127.0.0.1 at 2015-09-29 11:29:07 +0200
Processing by StripeClerk::ChargesController#create as HTML
  Parameters: {"utf8"=>"✓", "stripeToken"=>"tok_16qKQ0Bj62FxAyFmkbYywjK7", "stripeTokenType"=>"card", "stripeEmail"=>"user@example.com"}
  [1m[35mOrder Load (0.1ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 18]]
  [1m[36mBasket Load (0.1ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 18], ["kori_type", "Order"]]
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "orders" SET "address" = ?, "paid_on" = ?, "payment_info" = ?, "payment_type" = ?, "updated_at" = ? WHERE "orders"."id" = 18[0m  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["paid_on", "2015-09-29"], ["payment_info", "ch_16qKQ5Bj62FxAyFmHuTsaWb9"], ["payment_type", "stripe"], ["updated_at", "2015-09-29 09:29:09.739212"]]
  [1m[35m (21.2ms)[0m  commit transaction
Redirected to http://127.0.0.1:45343/order
Completed 302 Found in 2080ms (ActiveRecord: 22.8ms)
Started GET "/order" for 127.0.0.1 at 2015-09-29 11:29:09 +0200
Processing by ShopController#order as HTML
  [1m[36mOrder Load (0.2ms)[0m  [1mSELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 18]]
  [1m[35mBasket Load (0.1ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1  [["kori_id", 18], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_show.html.haml (3.7ms)
  Rendered shop/order.haml within layouts/application (6.0ms)
Completed 200 OK in 9ms (Views: 6.7ms | ActiveRecord: 0.3ms)
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[35mClerk Load (0.1ms)[0m  SELECT  "clerks".* FROM "clerks"   ORDER BY "clerks"."id" ASC LIMIT 1
Started GET "/sign_in" for 127.0.0.1 at 2015-09-29 11:52:20 +0200
Processing by SessionsController#sign_in as HTML
  Rendered /home/ana/.rvm/gems/ruby-2.2.1/bundler/gems/office_clerk-68c3fbd6c683/app/views/sessions/sign_in.haml within layouts/application (38.5ms)
Completed 500 Internal Server Error in 42ms
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "products" ("cost", "created_at", "inventory", "link", "name", "price", "properties", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["cost", 5.0], ["created_at", "2015-09-29 09:52:20.334657"], ["inventory", 5], ["link", "product_1"], ["name", "product 1"], ["price", 10.0], ["properties", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["tax", 10.0], ["updated_at", "2015-09-29 09:52:20.334657"]]
  [1m[36m (17.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "baskets" ("created_at", "total_price", "total_tax", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-09-29 09:52:20.371597"], ["total_price", 10.0], ["total_tax", 0.91], ["updated_at", "2015-09-29 09:52:20.371597"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("basket_id", "created_at", "name", "price", "product_id", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["basket_id", 19], ["created_at", "2015-09-29 09:52:20.372685"], ["name", "product 1"], ["price", 10.0], ["product_id", 19], ["tax", 10.0], ["updated_at", "2015-09-29 09:52:20.372685"]]
  [1m[36mBasket Load (0.1ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 19]]
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items"  WHERE "items"."basket_id" = ?  [["basket_id", 19]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "baskets" SET "updated_at" = '2015-09-29 09:52:20.375327' WHERE "baskets"."id" = 19[0m
  [1m[35m (13.9ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.7ms)[0m  SELECT  "orders".* FROM "orders"   ORDER BY created_at DESC LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "orders" ("address", "created_at", "email", "number", "ordered_on", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["created_at", "2015-09-29 09:52:20.600928"], ["email", "test1@test.com"], ["number", "R201530018"], ["ordered_on", "2015-09-29"], ["updated_at", "2015-09-29 09:52:20.600928"]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "baskets" SET "kori_id" = ?, "kori_type" = ?, "updated_at" = ? WHERE "baskets"."id" = 19  [["kori_id", 19], ["kori_type", "Order"], ["updated_at", "2015-09-29 09:52:20.604695"]]
  [1m[36m (70.2ms)[0m  [1mcommit transaction[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-29 11:52:20 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-29 11:52:20 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-29 11:52:20 +0200
Started GET "/order" for 127.0.0.1 at 2015-09-29 11:52:20 +0200
Processing by ShopController#order as HTML
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 19]]
  [1m[36mBasket Load (0.1ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 19], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_new.html.haml (9.4ms)
  Rendered shop/order.haml within layouts/application (13.4ms)
Completed 200 OK in 19ms (Views: 17.2ms | ActiveRecord: 0.5ms)
Started GET "/assets/application.css" for 127.0.0.1 at 2015-09-29 11:52:20 +0200
Started GET "/assets/application.js" for 127.0.0.1 at 2015-09-29 11:52:20 +0200
Started POST "/charges" for 127.0.0.1 at 2015-09-29 11:52:26 +0200
Processing by StripeClerk::ChargesController#create as HTML
  Parameters: {"utf8"=>"✓", "stripeToken"=>"tok_16qKmZBj62FxAyFmLVcMaVvl", "stripeTokenType"=>"card", "stripeEmail"=>"user@example.com"}
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 19]]
  [1m[36mBasket Load (0.1ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 19], ["kori_type", "Order"]]
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "orders" SET "address" = ?, "paid_on" = ?, "payment_info" = ?, "payment_type" = ?, "updated_at" = ? WHERE "orders"."id" = 19[0m  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["paid_on", "2015-09-29"], ["payment_info", "ch_16qKmeBj62FxAyFmJzbsvGJc"], ["payment_type", "stripe"], ["updated_at", "2015-09-29 09:52:28.668665"]]
  [1m[35m (15.4ms)[0m  commit transaction
Redirected to http://127.0.0.1:36063/order
Completed 302 Found in 2059ms (ActiveRecord: 16.8ms)
Started GET "/order" for 127.0.0.1 at 2015-09-29 11:52:28 +0200
Processing by ShopController#order as HTML
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 19]]
  [1m[35mBasket Load (0.2ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1  [["kori_id", 19], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_show.html.haml (4.0ms)
  Rendered shop/order.haml within layouts/application (5.6ms)
Completed 200 OK in 8ms (Views: 6.3ms | ActiveRecord: 0.3ms)
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[35mClerk Load (0.1ms)[0m  SELECT  "clerks".* FROM "clerks"   ORDER BY "clerks"."id" ASC LIMIT 1
Started GET "/sign_in" for 127.0.0.1 at 2015-09-29 12:04:56 +0200
Processing by SessionsController#sign_in as HTML
  Rendered /home/ana/.rvm/gems/ruby-2.2.1/bundler/gems/office_clerk-68c3fbd6c683/app/views/sessions/sign_in.haml within layouts/application (39.6ms)
Completed 500 Internal Server Error in 44ms
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "products" ("cost", "created_at", "inventory", "link", "name", "price", "properties", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["cost", 5.0], ["created_at", "2015-09-29 10:04:56.818787"], ["inventory", 5], ["link", "product_1"], ["name", "product 1"], ["price", 10.0], ["properties", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["tax", 10.0], ["updated_at", "2015-09-29 10:04:56.818787"]]
  [1m[36m (18.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "baskets" ("created_at", "total_price", "total_tax", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-09-29 10:04:56.854136"], ["total_price", 10.0], ["total_tax", 0.91], ["updated_at", "2015-09-29 10:04:56.854136"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("basket_id", "created_at", "name", "price", "product_id", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["basket_id", 20], ["created_at", "2015-09-29 10:04:56.855161"], ["name", "product 1"], ["price", 10.0], ["product_id", 20], ["tax", 10.0], ["updated_at", "2015-09-29 10:04:56.855161"]]
  [1m[36mBasket Load (0.1ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 20]]
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items"  WHERE "items"."basket_id" = ?  [["basket_id", 20]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "baskets" SET "updated_at" = '2015-09-29 10:04:56.857689' WHERE "baskets"."id" = 20[0m
  [1m[35m (13.9ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.8ms)[0m  SELECT  "orders".* FROM "orders"   ORDER BY created_at DESC LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "orders" ("address", "created_at", "email", "number", "ordered_on", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["created_at", "2015-09-29 10:04:57.086172"], ["email", "test1@test.com"], ["number", "R201530019"], ["ordered_on", "2015-09-29"], ["updated_at", "2015-09-29 10:04:57.086172"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "baskets" SET "kori_id" = ?, "kori_type" = ?, "updated_at" = ? WHERE "baskets"."id" = 20  [["kori_id", 20], ["kori_type", "Order"], ["updated_at", "2015-09-29 10:04:57.089827"]]
  [1m[36m (53.8ms)[0m  [1mcommit transaction[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-29 12:04:57 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-29 12:04:57 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-29 12:04:57 +0200
Started GET "/order" for 127.0.0.1 at 2015-09-29 12:04:57 +0200
Processing by ShopController#order as HTML
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 20]]
  [1m[36mBasket Load (0.1ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 20], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_new.html.haml (9.3ms)
  Rendered shop/order.haml within layouts/application (13.3ms)
Completed 200 OK in 19ms (Views: 17.1ms | ActiveRecord: 0.4ms)
Started GET "/assets/application.css" for 127.0.0.1 at 2015-09-29 12:04:57 +0200
Started GET "/assets/application.js" for 127.0.0.1 at 2015-09-29 12:04:57 +0200
Started POST "/charges" for 127.0.0.1 at 2015-09-29 12:05:03 +0200
Processing by StripeClerk::ChargesController#create as HTML
  Parameters: {"utf8"=>"✓", "stripeToken"=>"tok_16qKynBj62FxAyFmAZPV5Mvh", "stripeTokenType"=>"card", "stripeEmail"=>"user@example.com"}
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 20]]
  [1m[36mBasket Load (0.3ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 20], ["kori_type", "Order"]]
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "orders" SET "address" = ?, "paid_on" = ?, "payment_info" = ?, "payment_type" = ?, "updated_at" = ? WHERE "orders"."id" = 20[0m  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["paid_on", "2015-09-29"], ["payment_info", "ch_16qKyrBj62FxAyFmtbRIz32h"], ["payment_type", "stripe"], ["updated_at", "2015-09-29 10:05:06.066649"]]
  [1m[35m (27.2ms)[0m  commit transaction
Redirected to http://127.0.0.1:46210/order
Completed 302 Found in 2296ms (ActiveRecord: 29.1ms)
Started GET "/order" for 127.0.0.1 at 2015-09-29 12:05:06 +0200
Processing by ShopController#order as HTML
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 20]]
  [1m[35mBasket Load (0.1ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1  [["kori_id", 20], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_show.html.haml (3.2ms)
  Rendered shop/order.haml within layouts/application (4.9ms)
Completed 200 OK in 8ms (Views: 5.7ms | ActiveRecord: 0.3ms)
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[35mClerk Load (0.1ms)[0m  SELECT  "clerks".* FROM "clerks"   ORDER BY "clerks"."id" ASC LIMIT 1
Started GET "/sign_in" for 127.0.0.1 at 2015-09-29 12:06:43 +0200
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "products" ("cost", "created_at", "inventory", "link", "name", "price", "properties", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["cost", 5.0], ["created_at", "2015-09-29 10:06:53.957864"], ["inventory", 5], ["link", "product_1"], ["name", "product 1"], ["price", 10.0], ["properties", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["tax", 10.0], ["updated_at", "2015-09-29 10:06:53.957864"]]
  [1m[36m (37.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "baskets" ("created_at", "total_price", "total_tax", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-09-29 10:06:54.009873"], ["total_price", 10.0], ["total_tax", 0.91], ["updated_at", "2015-09-29 10:06:54.009873"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("basket_id", "created_at", "name", "price", "product_id", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["basket_id", 21], ["created_at", "2015-09-29 10:06:54.010887"], ["name", "product 1"], ["price", 10.0], ["product_id", 21], ["tax", 10.0], ["updated_at", "2015-09-29 10:06:54.010887"]]
  [1m[36mBasket Load (0.1ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 21]]
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items"  WHERE "items"."basket_id" = ?  [["basket_id", 21]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "baskets" SET "updated_at" = '2015-09-29 10:06:54.013473' WHERE "baskets"."id" = 21[0m
  [1m[35m (13.4ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.7ms)[0m  SELECT  "orders".* FROM "orders"   ORDER BY created_at DESC LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "orders" ("address", "created_at", "email", "number", "ordered_on", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["created_at", "2015-09-29 10:06:54.228604"], ["email", "test1@test.com"], ["number", "R201530020"], ["ordered_on", "2015-09-29"], ["updated_at", "2015-09-29 10:06:54.228604"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "baskets" SET "kori_id" = ?, "kori_type" = ?, "updated_at" = ? WHERE "baskets"."id" = 21  [["kori_id", 21], ["kori_type", "Order"], ["updated_at", "2015-09-29 10:06:54.232376"]]
  [1m[36m (73.8ms)[0m  [1mcommit transaction[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-29 12:06:54 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-29 12:06:54 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-29 12:06:54 +0200
Started GET "/order" for 127.0.0.1 at 2015-09-29 12:06:54 +0200
Processing by ShopController#order as HTML
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 21]]
  [1m[36mBasket Load (0.2ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 21], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_new.html.haml (9.5ms)
  Rendered shop/order.haml within layouts/application (14.8ms)
Completed 200 OK in 49ms (Views: 20.7ms | ActiveRecord: 0.5ms)
Started GET "/assets/application.css" for 127.0.0.1 at 2015-09-29 12:06:54 +0200
Started GET "/assets/application.js" for 127.0.0.1 at 2015-09-29 12:06:54 +0200
Started POST "/charges" for 127.0.0.1 at 2015-09-29 12:06:59 +0200
Processing by StripeClerk::ChargesController#create as HTML
  Parameters: {"utf8"=>"✓", "stripeToken"=>"tok_16qL0fBj62FxAyFmBD8IHsKb", "stripeTokenType"=>"card", "stripeEmail"=>"user@example.com"}
  [1m[35mOrder Load (0.1ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 21]]
  [1m[36mBasket Load (0.1ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 21], ["kori_type", "Order"]]
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "orders" SET "address" = ?, "paid_on" = ?, "payment_info" = ?, "payment_type" = ?, "updated_at" = ? WHERE "orders"."id" = 21[0m  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["paid_on", "2015-09-29"], ["payment_info", "ch_16qL0jBj62FxAyFmj2ZM6ort"], ["payment_type", "stripe"], ["updated_at", "2015-09-29 10:07:01.997374"]]
  [1m[35m (23.4ms)[0m  commit transaction
Redirected to http://127.0.0.1:55359/order
Completed 302 Found in 2079ms (ActiveRecord: 24.9ms)
Started GET "/order" for 127.0.0.1 at 2015-09-29 12:07:02 +0200
Processing by ShopController#order as HTML
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 21]]
  [1m[35mBasket Load (0.2ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1  [["kori_id", 21], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_show.html.haml (3.6ms)
  Rendered shop/order.haml within layouts/application (5.5ms)
Completed 200 OK in 9ms (Views: 6.4ms | ActiveRecord: 0.3ms)
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[35mClerk Load (0.1ms)[0m  SELECT  "clerks".* FROM "clerks"   ORDER BY "clerks"."id" ASC LIMIT 1
Started GET "/sign_in" for 127.0.0.1 at 2015-09-29 12:08:00 +0200
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "products" ("cost", "created_at", "inventory", "link", "name", "price", "properties", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["cost", 5.0], ["created_at", "2015-09-29 10:08:10.709232"], ["inventory", 5], ["link", "product_1"], ["name", "product 1"], ["price", 10.0], ["properties", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["tax", 10.0], ["updated_at", "2015-09-29 10:08:10.709232"]]
  [1m[36m (23.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "baskets" ("created_at", "total_price", "total_tax", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-09-29 10:08:10.742437"], ["total_price", 10.0], ["total_tax", 0.91], ["updated_at", "2015-09-29 10:08:10.742437"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("basket_id", "created_at", "name", "price", "product_id", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["basket_id", 22], ["created_at", "2015-09-29 10:08:10.743441"], ["name", "product 1"], ["price", 10.0], ["product_id", 22], ["tax", 10.0], ["updated_at", "2015-09-29 10:08:10.743441"]]
  [1m[36mBasket Load (0.1ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 22]]
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items"  WHERE "items"."basket_id" = ?  [["basket_id", 22]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "baskets" SET "updated_at" = '2015-09-29 10:08:10.746009' WHERE "baskets"."id" = 22[0m
  [1m[35m (13.9ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.3ms)[0m  SELECT  "orders".* FROM "orders"   ORDER BY created_at DESC LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "orders" ("address", "created_at", "email", "number", "ordered_on", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["created_at", "2015-09-29 10:08:10.905958"], ["email", "test1@test.com"], ["number", "R201530021"], ["ordered_on", "2015-09-29"], ["updated_at", "2015-09-29 10:08:10.905958"]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "baskets" SET "kori_id" = ?, "kori_type" = ?, "updated_at" = ? WHERE "baskets"."id" = 22  [["kori_id", 22], ["kori_type", "Order"], ["updated_at", "2015-09-29 10:08:10.909698"]]
  [1m[36m (30.8ms)[0m  [1mcommit transaction[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-29 12:08:10 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-29 12:08:11 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-29 12:08:11 +0200
Started GET "/order" for 127.0.0.1 at 2015-09-29 12:08:11 +0200
Processing by ShopController#order as HTML
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 22]]
  [1m[36mBasket Load (0.1ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 22], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_new.html.haml (9.4ms)
  Rendered shop/order.haml within layouts/application (14.6ms)
Completed 200 OK in 48ms (Views: 20.5ms | ActiveRecord: 0.4ms)
Started GET "/assets/application.css" for 127.0.0.1 at 2015-09-29 12:08:11 +0200
Started GET "/assets/application.js" for 127.0.0.1 at 2015-09-29 12:08:11 +0200
Started POST "/charges" for 127.0.0.1 at 2015-09-29 12:08:17 +0200
Processing by StripeClerk::ChargesController#create as HTML
  Parameters: {"utf8"=>"✓", "stripeToken"=>"tok_16qL1vBj62FxAyFmSz56uuYn", "stripeTokenType"=>"card", "stripeEmail"=>"user@example.com"}
  [1m[35mOrder Load (0.4ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 22]]
  [1m[36mBasket Load (0.1ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 22], ["kori_type", "Order"]]
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "orders" SET "address" = ?, "paid_on" = ?, "payment_info" = ?, "payment_type" = ?, "updated_at" = ? WHERE "orders"."id" = 22[0m  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["paid_on", "2015-09-29"], ["payment_info", "ch_16qL1zBj62FxAyFmNocX8dfn"], ["payment_type", "stripe"], ["updated_at", "2015-09-29 10:08:19.993134"]]
  [1m[35m (70.7ms)[0m  commit transaction
Redirected to http://127.0.0.1:39075/order
Completed 302 Found in 2226ms (ActiveRecord: 72.3ms)
Started GET "/order" for 127.0.0.1 at 2015-09-29 12:08:20 +0200
Processing by ShopController#order as HTML
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 22]]
  [1m[35mBasket Load (0.1ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1  [["kori_id", 22], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_show.html.haml (3.1ms)
  Rendered shop/order.haml within layouts/application (4.7ms)
Completed 200 OK in 7ms (Views: 5.4ms | ActiveRecord: 0.2ms)
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[35mClerk Load (0.1ms)[0m  SELECT  "clerks".* FROM "clerks"   ORDER BY "clerks"."id" ASC LIMIT 1
Started GET "/sign_in" for 127.0.0.1 at 2015-09-29 12:09:07 +0200
Processing by SessionsController#sign_in as HTML
  Rendered /home/ana/.rvm/gems/ruby-2.2.1/bundler/gems/office_clerk-68c3fbd6c683/app/views/sessions/sign_in.haml within layouts/application (38.1ms)
Completed 500 Internal Server Error in 42ms
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "products" ("cost", "created_at", "inventory", "link", "name", "price", "properties", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["cost", 5.0], ["created_at", "2015-09-29 10:09:08.067290"], ["inventory", 5], ["link", "product_1"], ["name", "product 1"], ["price", 10.0], ["properties", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["tax", 10.0], ["updated_at", "2015-09-29 10:09:08.067290"]]
  [1m[36m (16.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "baskets" ("created_at", "total_price", "total_tax", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-09-29 10:09:08.101076"], ["total_price", 10.0], ["total_tax", 0.91], ["updated_at", "2015-09-29 10:09:08.101076"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("basket_id", "created_at", "name", "price", "product_id", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["basket_id", 23], ["created_at", "2015-09-29 10:09:08.102785"], ["name", "product 1"], ["price", 10.0], ["product_id", 23], ["tax", 10.0], ["updated_at", "2015-09-29 10:09:08.102785"]]
  [1m[36mBasket Load (0.1ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 23]]
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items"  WHERE "items"."basket_id" = ?  [["basket_id", 23]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "baskets" SET "updated_at" = '2015-09-29 10:09:08.106731' WHERE "baskets"."id" = 23[0m
  [1m[35m (13.4ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.8ms)[0m  SELECT  "orders".* FROM "orders"   ORDER BY created_at DESC LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("address", "created_at", "email", "number", "ordered_on", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["created_at", "2015-09-29 10:09:08.297751"], ["email", "test1@test.com"], ["number", "R201530022"], ["ordered_on", "2015-09-29"], ["updated_at", "2015-09-29 10:09:08.297751"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "baskets" SET "kori_id" = ?, "kori_type" = ?, "updated_at" = ? WHERE "baskets"."id" = 23  [["kori_id", 23], ["kori_type", "Order"], ["updated_at", "2015-09-29 10:09:08.299287"]]
  [1m[36m (91.9ms)[0m  [1mcommit transaction[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-29 12:09:08 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-29 12:09:08 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-29 12:09:08 +0200
Started GET "/order" for 127.0.0.1 at 2015-09-29 12:09:08 +0200
Processing by ShopController#order as HTML
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 23]]
  [1m[36mBasket Load (0.2ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 23], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_new.html.haml (9.8ms)
  Rendered shop/order.haml within layouts/application (14.0ms)
Completed 200 OK in 20ms (Views: 17.9ms | ActiveRecord: 0.5ms)
Started GET "/assets/application.css" for 127.0.0.1 at 2015-09-29 12:09:08 +0200
Started GET "/assets/application.js" for 127.0.0.1 at 2015-09-29 12:09:08 +0200
Started POST "/charges" for 127.0.0.1 at 2015-09-29 12:09:14 +0200
Processing by StripeClerk::ChargesController#create as HTML
  Parameters: {"utf8"=>"✓", "stripeToken"=>"tok_16qL2pBj62FxAyFmNP90LCXh", "stripeTokenType"=>"card", "stripeEmail"=>"user@example.com"}
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 23]]
  [1m[36mBasket Load (0.1ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 23], ["kori_type", "Order"]]
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "orders" SET "address" = ?, "paid_on" = ?, "payment_info" = ?, "payment_type" = ?, "updated_at" = ? WHERE "orders"."id" = 23[0m  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["paid_on", "2015-09-29"], ["payment_info", "ch_16qL2uBj62FxAyFmJJrG5PhY"], ["payment_type", "stripe"], ["updated_at", "2015-09-29 10:09:16.377494"]]
  [1m[35m (12.3ms)[0m  commit transaction
Redirected to http://127.0.0.1:41526/order
Completed 302 Found in 2319ms (ActiveRecord: 14.0ms)
Started GET "/order" for 127.0.0.1 at 2015-09-29 12:09:16 +0200
Processing by ShopController#order as HTML
  [1m[36mOrder Load (0.2ms)[0m  [1mSELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 23]]
  [1m[35mBasket Load (0.1ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1  [["kori_id", 23], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_show.html.haml (2.1ms)
  Rendered shop/order.haml within layouts/application (3.3ms)
Completed 200 OK in 13ms (Views: 9.7ms | ActiveRecord: 0.3ms)
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[35mClerk Load (0.1ms)[0m  SELECT  "clerks".* FROM "clerks"   ORDER BY "clerks"."id" ASC LIMIT 1
Started GET "/sign_in" for 127.0.0.1 at 2015-09-29 12:12:32 +0200
Processing by SessionsController#sign_in as HTML
  Rendered /home/ana/.rvm/gems/ruby-2.2.1/bundler/gems/office_clerk-68c3fbd6c683/app/views/sessions/sign_in.haml within layouts/application (38.2ms)
Completed 500 Internal Server Error in 43ms
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "products" ("cost", "created_at", "inventory", "link", "name", "price", "properties", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["cost", 5.0], ["created_at", "2015-09-29 10:12:32.859713"], ["inventory", 5], ["link", "product_1"], ["name", "product 1"], ["price", 10.0], ["properties", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["tax", 10.0], ["updated_at", "2015-09-29 10:12:32.859713"]]
  [1m[36m (96.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "baskets" ("created_at", "total_price", "total_tax", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-09-29 10:12:32.973315"], ["total_price", 10.0], ["total_tax", 0.91], ["updated_at", "2015-09-29 10:12:32.973315"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("basket_id", "created_at", "name", "price", "product_id", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["basket_id", 24], ["created_at", "2015-09-29 10:12:32.974318"], ["name", "product 1"], ["price", 10.0], ["product_id", 24], ["tax", 10.0], ["updated_at", "2015-09-29 10:12:32.974318"]]
  [1m[36mBasket Load (0.1ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 24]]
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items"  WHERE "items"."basket_id" = ?  [["basket_id", 24]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "baskets" SET "updated_at" = '2015-09-29 10:12:32.976885' WHERE "baskets"."id" = 24[0m
  [1m[35m (13.6ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.3ms)[0m  SELECT  "orders".* FROM "orders"   ORDER BY created_at DESC LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders" ("address", "created_at", "email", "number", "ordered_on", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["created_at", "2015-09-29 10:12:33.198942"], ["email", "test1@test.com"], ["number", "R201530023"], ["ordered_on", "2015-09-29"], ["updated_at", "2015-09-29 10:12:33.198942"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "baskets" SET "kori_id" = ?, "kori_type" = ?, "updated_at" = ? WHERE "baskets"."id" = 24  [["kori_id", 24], ["kori_type", "Order"], ["updated_at", "2015-09-29 10:12:33.200166"]]
  [1m[36m (59.0ms)[0m  [1mcommit transaction[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-29 12:12:33 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-29 12:12:33 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-29 12:12:33 +0200
Started GET "/order" for 127.0.0.1 at 2015-09-29 12:12:33 +0200
Processing by ShopController#order as HTML
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 24]]
  [1m[36mBasket Load (0.2ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 24], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_new.html.haml (9.9ms)
  Rendered shop/order.haml within layouts/application (14.0ms)
Completed 200 OK in 21ms (Views: 17.8ms | ActiveRecord: 0.5ms)
Started GET "/assets/application.css" for 127.0.0.1 at 2015-09-29 12:12:33 +0200
Started GET "/assets/application.js" for 127.0.0.1 at 2015-09-29 12:12:33 +0200
Started POST "/charges" for 127.0.0.1 at 2015-09-29 12:12:39 +0200
Processing by StripeClerk::ChargesController#create as HTML
  Parameters: {"utf8"=>"✓", "stripeToken"=>"tok_16qL68Bj62FxAyFmVjbi9yWe", "stripeTokenType"=>"card", "stripeEmail"=>"user@example.com"}
  [1m[35mOrder Load (0.1ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 24]]
  [1m[36mBasket Load (0.1ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 24], ["kori_type", "Order"]]
  [1m[35m (0.7ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "orders" SET "address" = ?, "paid_on" = ?, "payment_info" = ?, "payment_type" = ?, "updated_at" = ? WHERE "orders"."id" = 24[0m  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["paid_on", "2015-09-29"], ["payment_info", "ch_16qL6CBj62FxAyFmTSMivbrk"], ["payment_type", "stripe"], ["updated_at", "2015-09-29 10:12:41.032589"]]
  [1m[35m (54.8ms)[0m  commit transaction
Redirected to http://127.0.0.1:51762/order
Completed 302 Found in 2050ms (ActiveRecord: 56.5ms)
Started GET "/order" for 127.0.0.1 at 2015-09-29 12:12:41 +0200
Processing by ShopController#order as HTML
  [1m[36mOrder Load (0.2ms)[0m  [1mSELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 24]]
  [1m[35mBasket Load (0.1ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1  [["kori_id", 24], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_show.html.haml (2.9ms)
  Rendered shop/order.haml within layouts/application (5.0ms)
Completed 200 OK in 8ms (Views: 5.8ms | ActiveRecord: 0.3ms)
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[35mClerk Load (0.1ms)[0m  SELECT  "clerks".* FROM "clerks"   ORDER BY "clerks"."id" ASC LIMIT 1
Started GET "/sign_in" for 127.0.0.1 at 2015-09-29 12:20:07 +0200
Processing by SessionsController#sign_in as HTML
  Rendered /home/ana/.rvm/gems/ruby-2.2.1/bundler/gems/office_clerk-68c3fbd6c683/app/views/sessions/sign_in.haml within layouts/application (38.6ms)
Completed 500 Internal Server Error in 42ms
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "products" ("cost", "created_at", "inventory", "link", "name", "price", "properties", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["cost", 5.0], ["created_at", "2015-09-29 10:20:08.114927"], ["inventory", 5], ["link", "product_1"], ["name", "product 1"], ["price", 10.0], ["properties", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["tax", 10.0], ["updated_at", "2015-09-29 10:20:08.114927"]]
  [1m[36m (33.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "baskets" ("created_at", "total_price", "total_tax", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-09-29 10:20:08.164115"], ["total_price", 10.0], ["total_tax", 0.91], ["updated_at", "2015-09-29 10:20:08.164115"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("basket_id", "created_at", "name", "price", "product_id", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["basket_id", 25], ["created_at", "2015-09-29 10:20:08.165889"], ["name", "product 1"], ["price", 10.0], ["product_id", 25], ["tax", 10.0], ["updated_at", "2015-09-29 10:20:08.165889"]]
  [1m[36mBasket Load (0.1ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 25]]
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items"  WHERE "items"."basket_id" = ?  [["basket_id", 25]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "baskets" SET "updated_at" = '2015-09-29 10:20:08.169044' WHERE "baskets"."id" = 25[0m
  [1m[35m (14.8ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.9ms)[0m  SELECT  "orders".* FROM "orders"   ORDER BY created_at DESC LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "orders" ("address", "created_at", "email", "number", "ordered_on", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["created_at", "2015-09-29 10:20:08.470940"], ["email", "test1@test.com"], ["number", "R201530024"], ["ordered_on", "2015-09-29"], ["updated_at", "2015-09-29 10:20:08.470940"]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "baskets" SET "kori_id" = ?, "kori_type" = ?, "updated_at" = ? WHERE "baskets"."id" = 25  [["kori_id", 25], ["kori_type", "Order"], ["updated_at", "2015-09-29 10:20:08.474759"]]
  [1m[36m (85.1ms)[0m  [1mcommit transaction[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-29 12:20:08 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-29 12:20:08 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-29 12:20:08 +0200
Started GET "/order" for 127.0.0.1 at 2015-09-29 12:20:08 +0200
Processing by ShopController#order as HTML
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 25]]
  [1m[36mBasket Load (0.1ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 25], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_new.html.haml (10.8ms)
  Rendered shop/order.haml within layouts/application (18.1ms)
Completed 200 OK in 25ms (Views: 22.6ms | ActiveRecord: 0.5ms)
Started GET "/assets/application.css" for 127.0.0.1 at 2015-09-29 12:20:08 +0200
Started GET "/assets/application.js" for 127.0.0.1 at 2015-09-29 12:20:08 +0200
Started POST "/charges" for 127.0.0.1 at 2015-09-29 12:20:14 +0200
Processing by StripeClerk::ChargesController#create as HTML
  Parameters: {"utf8"=>"✓", "stripeToken"=>"tok_16qLDTBj62FxAyFm34UTVrsK", "stripeTokenType"=>"card", "stripeEmail"=>"user@example.com"}
  [1m[35mOrder Load (0.1ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 25]]
  [1m[36mBasket Load (0.1ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 25], ["kori_type", "Order"]]
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "address" = ?, "paid_on" = ?, "payment_info" = ?, "payment_type" = ?, "updated_at" = ? WHERE "orders"."id" = 25[0m  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["paid_on", "2015-09-29"], ["payment_info", "ch_16qLDYBj62FxAyFmL93iY6LD"], ["payment_type", "stripe"], ["updated_at", "2015-09-29 10:20:16.369525"]]
  [1m[35m (13.9ms)[0m  commit transaction
Redirected to http://127.0.0.1:53688/order
Completed 302 Found in 2178ms (ActiveRecord: 15.1ms)
Started GET "/order" for 127.0.0.1 at 2015-09-29 12:20:16 +0200
Processing by ShopController#order as HTML
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 25]]
  [1m[35mBasket Load (0.1ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1  [["kori_id", 25], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_show.html.haml (3.1ms)
  Rendered shop/order.haml within layouts/application (5.1ms)
Completed 200 OK in 7ms (Views: 5.8ms | ActiveRecord: 0.3ms)
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[35mClerk Load (0.1ms)[0m  SELECT  "clerks".* FROM "clerks"   ORDER BY "clerks"."id" ASC LIMIT 1
Started GET "/sign_in" for 127.0.0.1 at 2015-09-29 12:21:02 +0200
Processing by SessionsController#sign_in as HTML
  Rendered /home/ana/.rvm/gems/ruby-2.2.1/bundler/gems/office_clerk-68c3fbd6c683/app/views/sessions/sign_in.haml within layouts/application (39.1ms)
Completed 500 Internal Server Error in 43ms
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "products" ("cost", "created_at", "inventory", "link", "name", "price", "properties", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["cost", 5.0], ["created_at", "2015-09-29 10:21:02.947516"], ["inventory", 5], ["link", "product_1"], ["name", "product 1"], ["price", 10.0], ["properties", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["tax", 10.0], ["updated_at", "2015-09-29 10:21:02.947516"]]
  [1m[36m (15.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "baskets" ("created_at", "total_price", "total_tax", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-09-29 10:21:02.983493"], ["total_price", 10.0], ["total_tax", 0.91], ["updated_at", "2015-09-29 10:21:02.983493"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("basket_id", "created_at", "name", "price", "product_id", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["basket_id", 26], ["created_at", "2015-09-29 10:21:02.984612"], ["name", "product 1"], ["price", 10.0], ["product_id", 26], ["tax", 10.0], ["updated_at", "2015-09-29 10:21:02.984612"]]
  [1m[36mBasket Load (0.1ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 26]]
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items"  WHERE "items"."basket_id" = ?  [["basket_id", 26]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "baskets" SET "updated_at" = '2015-09-29 10:21:02.987172' WHERE "baskets"."id" = 26[0m
  [1m[35m (13.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.4ms)[0m  SELECT  "orders".* FROM "orders"   ORDER BY created_at DESC LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "orders" ("address", "created_at", "email", "number", "ordered_on", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["created_at", "2015-09-29 10:21:03.173098"], ["email", "test1@test.com"], ["number", "R201530025"], ["ordered_on", "2015-09-29"], ["updated_at", "2015-09-29 10:21:03.173098"]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "baskets" SET "kori_id" = ?, "kori_type" = ?, "updated_at" = ? WHERE "baskets"."id" = 26  [["kori_id", 26], ["kori_type", "Order"], ["updated_at", "2015-09-29 10:21:03.176535"]]
  [1m[36m (99.8ms)[0m  [1mcommit transaction[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-29 12:21:03 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-29 12:21:03 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-29 12:21:03 +0200
Started GET "/order" for 127.0.0.1 at 2015-09-29 12:21:03 +0200
Processing by ShopController#order as HTML
  [1m[35mOrder Load (0.3ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 26]]
  [1m[36mBasket Load (0.2ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 26], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_new.html.haml (10.0ms)
  Rendered shop/order.haml within layouts/application (14.7ms)
Completed 200 OK in 22ms (Views: 19.2ms | ActiveRecord: 0.6ms)
Started GET "/assets/application.css" for 127.0.0.1 at 2015-09-29 12:21:03 +0200
Started GET "/assets/application.js" for 127.0.0.1 at 2015-09-29 12:21:03 +0200
Started POST "/charges" for 127.0.0.1 at 2015-09-29 12:21:08 +0200
Processing by StripeClerk::ChargesController#create as HTML
  Parameters: {"utf8"=>"✓", "stripeToken"=>"tok_16qLEMBj62FxAyFmDHNpLrMV", "stripeTokenType"=>"card", "stripeEmail"=>"user@example.com"}
  [1m[35mOrder Load (0.1ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 26]]
  [1m[36mBasket Load (0.1ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 26], ["kori_type", "Order"]]
  [1m[35m (0.3ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "orders" SET "address" = ?, "paid_on" = ?, "payment_info" = ?, "payment_type" = ?, "updated_at" = ? WHERE "orders"."id" = 26[0m  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["paid_on", "2015-09-29"], ["payment_info", "ch_16qLEQBj62FxAyFma59FCxlb"], ["payment_type", "stripe"], ["updated_at", "2015-09-29 10:21:11.212630"]]
  [1m[35m (65.3ms)[0m  commit transaction
Redirected to http://127.0.0.1:45135/order
Completed 302 Found in 2373ms (ActiveRecord: 66.9ms)
Started GET "/order" for 127.0.0.1 at 2015-09-29 12:21:11 +0200
Processing by ShopController#order as HTML
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 26]]
  [1m[35mBasket Load (0.2ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1  [["kori_id", 26], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_show.html.haml (2.5ms)
  Rendered shop/order.haml within layouts/application (3.7ms)
Completed 200 OK in 6ms (Views: 4.3ms | ActiveRecord: 0.3ms)
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mClerk Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "clerks"  WHERE "clerks"."email" = 'test1@test.com' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "products" ("cost", "created_at", "inventory", "link", "name", "price", "properties", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["cost", 5.0], ["created_at", "2015-09-29 10:27:12.052346"], ["inventory", 5], ["link", "product_1"], ["name", "product 1"], ["price", 10.0], ["properties", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["tax", 10.0], ["updated_at", "2015-09-29 10:27:12.052346"]]
  [1m[36m (72.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "baskets" ("created_at", "total_price", "total_tax", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-09-29 10:27:12.141247"], ["total_price", 10.0], ["total_tax", 0.91], ["updated_at", "2015-09-29 10:27:12.141247"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("basket_id", "created_at", "name", "price", "product_id", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["basket_id", 27], ["created_at", "2015-09-29 10:27:12.142240"], ["name", "product 1"], ["price", 10.0], ["product_id", 27], ["tax", 10.0], ["updated_at", "2015-09-29 10:27:12.142240"]]
  [1m[36mBasket Load (0.1ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 27]]
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items"  WHERE "items"."basket_id" = ?  [["basket_id", 27]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "baskets" SET "updated_at" = '2015-09-29 10:27:12.144669' WHERE "baskets"."id" = 27[0m
  [1m[35m (13.5ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.8ms)[0m  SELECT  "orders".* FROM "orders"   ORDER BY created_at DESC LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "orders" ("address", "created_at", "email", "number", "ordered_on", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["created_at", "2015-09-29 10:27:12.246646"], ["email", "test1@test.com"], ["number", "R201530026"], ["ordered_on", "2015-09-29"], ["updated_at", "2015-09-29 10:27:12.246646"]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "baskets" SET "kori_id" = ?, "kori_type" = ?, "updated_at" = ? WHERE "baskets"."id" = 27  [["kori_id", 27], ["kori_type", "Order"], ["updated_at", "2015-09-29 10:27:12.250414"]]
  [1m[36m (82.5ms)[0m  [1mcommit transaction[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-29 12:27:12 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-29 12:27:12 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-29 12:27:12 +0200
Started GET "/order" for 127.0.0.1 at 2015-09-29 12:27:12 +0200
Processing by ShopController#order as HTML
  [1m[35mOrder Load (0.4ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 27]]
  [1m[36mBasket Load (0.1ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 27], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_new.html.haml (9.5ms)
  Rendered shop/order.haml within layouts/application (14.2ms)
Completed 200 OK in 22ms (Views: 20.0ms | ActiveRecord: 0.7ms)
Started GET "/assets/application.css" for 127.0.0.1 at 2015-09-29 12:27:12 +0200
Started GET "/assets/application.js" for 127.0.0.1 at 2015-09-29 12:27:12 +0200
Started POST "/charges" for 127.0.0.1 at 2015-09-29 12:27:18 +0200
Processing by StripeClerk::ChargesController#create as HTML
  Parameters: {"utf8"=>"✓", "stripeToken"=>"tok_16qLKJBj62FxAyFm67VuiWqb", "stripeTokenType"=>"card", "stripeEmail"=>"user@example.com"}
  [1m[35mOrder Load (0.1ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 27]]
  [1m[36mBasket Load (0.1ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 27], ["kori_type", "Order"]]
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "orders" SET "address" = ?, "paid_on" = ?, "payment_info" = ?, "payment_type" = ?, "updated_at" = ? WHERE "orders"."id" = 27[0m  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["paid_on", "2015-09-29"], ["payment_info", "ch_16qLKNBj62FxAyFmU1ddUwBa"], ["payment_type", "stripe"], ["updated_at", "2015-09-29 10:27:20.301606"]]
  [1m[35m (21.3ms)[0m  commit transaction
Redirected to http://127.0.0.1:41914/order
Completed 302 Found in 2132ms (ActiveRecord: 22.7ms)
Started GET "/order" for 127.0.0.1 at 2015-09-29 12:27:20 +0200
Processing by ShopController#order as HTML
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 27]]
  [1m[35mBasket Load (0.2ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1  [["kori_id", 27], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_show.html.haml (3.8ms)
  Rendered shop/order.haml within layouts/application (6.1ms)
Completed 200 OK in 9ms (Views: 6.7ms | ActiveRecord: 0.3ms)
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mClerk Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "clerks"  WHERE "clerks"."email" = 'ana@email.com' LIMIT 1[0m
Binary data inserted for `string` type on column `password_salt`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "clerks" ("address", "created_at", "email", "encrypted_password", "password_salt", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname: Test Clerk1\n"], ["created_at", "2015-09-29 10:28:14.263256"], ["email", "ana@email.com"], ["encrypted_password", "44a919036aa64e2d7fbf4bf12a69555d243d9106f895ab5b3ea20e35004822ea968a50ba3eee80d5e52dc22dfe8d989e174ab14b7e51ba5872ed5b9f08a40001"], ["password_salt", "$2a$10$dXeXvnYOIBBl2d2hxVSZH."], ["updated_at", "2015-09-29 10:28:14.263256"]]
  [1m[36m (25.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "products" ("cost", "created_at", "inventory", "link", "name", "price", "properties", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["cost", 5.0], ["created_at", "2015-09-29 10:28:14.342110"], ["inventory", 5], ["link", "product_1"], ["name", "product 1"], ["price", 10.0], ["properties", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["tax", 10.0], ["updated_at", "2015-09-29 10:28:14.342110"]]
  [1m[35m (14.1ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "baskets" ("created_at", "total_price", "total_tax", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-09-29 10:28:14.369879"], ["total_price", 10.0], ["total_tax", 0.91], ["updated_at", "2015-09-29 10:28:14.369879"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("basket_id", "created_at", "name", "price", "product_id", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["basket_id", 28], ["created_at", "2015-09-29 10:28:14.371035"], ["name", "product 1"], ["price", 10.0], ["product_id", 28], ["tax", 10.0], ["updated_at", "2015-09-29 10:28:14.371035"]]
  [1m[35mBasket Load (0.1ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 28]]
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items"  WHERE "items"."basket_id" = ?[0m  [["basket_id", 28]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "baskets" SET "updated_at" = '2015-09-29 10:28:14.373801' WHERE "baskets"."id" = 28
  [1m[36m (13.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mOrder Load (0.8ms)[0m  [1mSELECT  "orders".* FROM "orders"   ORDER BY created_at DESC LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "orders" ("address", "created_at", "email", "number", "ordered_on", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["created_at", "2015-09-29 10:28:14.492276"], ["email", "ana@email.com"], ["number", "R201530027"], ["ordered_on", "2015-09-29"], ["updated_at", "2015-09-29 10:28:14.492276"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "baskets" SET "kori_id" = ?, "kori_type" = ?, "updated_at" = ? WHERE "baskets"."id" = 28[0m  [["kori_id", 28], ["kori_type", "Order"], ["updated_at", "2015-09-29 10:28:14.495959"]]
  [1m[35m (111.3ms)[0m  commit transaction
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-29 12:28:14 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-29 12:28:15 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-29 12:28:15 +0200
Started GET "/order" for 127.0.0.1 at 2015-09-29 12:28:15 +0200
Processing by ShopController#order as HTML
  [1m[36mOrder Load (0.4ms)[0m  [1mSELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 28]]
  [1m[35mBasket Load (0.2ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1  [["kori_id", 28], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_new.html.haml (10.3ms)
  Rendered shop/order.haml within layouts/application (15.2ms)
Completed 200 OK in 57ms (Views: 21.3ms | ActiveRecord: 0.7ms)
Started GET "/assets/application.css" for 127.0.0.1 at 2015-09-29 12:28:15 +0200
Started GET "/assets/application.js" for 127.0.0.1 at 2015-09-29 12:28:15 +0200
Started POST "/charges" for 127.0.0.1 at 2015-09-29 12:28:20 +0200
Processing by StripeClerk::ChargesController#create as HTML
  Parameters: {"utf8"=>"✓", "stripeToken"=>"tok_16qLLJBj62FxAyFmovdqHTFP", "stripeTokenType"=>"card", "stripeEmail"=>"user@example.com"}
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 28]]
  [1m[35mBasket Load (0.1ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1  [["kori_id", 28], ["kori_type", "Order"]]
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "orders" SET "address" = ?, "paid_on" = ?, "payment_info" = ?, "payment_type" = ?, "updated_at" = ? WHERE "orders"."id" = 28  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["paid_on", "2015-09-29"], ["payment_info", "ch_16qLLOBj62FxAyFmUrWygdgh"], ["payment_type", "stripe"], ["updated_at", "2015-09-29 10:28:22.579940"]]
  [1m[36m (72.3ms)[0m  [1mcommit transaction[0m
Redirected to http://127.0.0.1:48338/order
Completed 302 Found in 2108ms (ActiveRecord: 73.7ms)
Started GET "/order" for 127.0.0.1 at 2015-09-29 12:28:22 +0200
Processing by ShopController#order as HTML
  [1m[35mOrder Load (0.1ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 28]]
  [1m[36mBasket Load (0.1ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 28], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_show.html.haml (3.7ms)
  Rendered shop/order.haml within layouts/application (14.7ms)
Completed 200 OK in 17ms (Views: 15.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "products" ("cost", "created_at", "inventory", "link", "name", "price", "properties", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["cost", 5.0], ["created_at", "2015-09-29 10:28:33.745375"], ["inventory", 5], ["link", "product_2"], ["name", "product 2"], ["price", 10.0], ["properties", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["tax", 10.0], ["updated_at", "2015-09-29 10:28:33.745375"]]
  [1m[35m (95.0ms)[0m  commit transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "baskets" ("created_at", "total_price", "total_tax", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-09-29 10:28:33.848055"], ["total_price", 10.0], ["total_tax", 0.91], ["updated_at", "2015-09-29 10:28:33.848055"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "items" ("basket_id", "created_at", "name", "price", "product_id", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["basket_id", 29], ["created_at", "2015-09-29 10:28:33.851258"], ["name", "product 2"], ["price", 10.0], ["product_id", 29], ["tax", 10.0], ["updated_at", "2015-09-29 10:28:33.851258"]]
  [1m[35mBasket Load (0.3ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 29]]
  [1m[36mItem Load (0.4ms)[0m  [1mSELECT "items".* FROM "items"  WHERE "items"."basket_id" = ?[0m  [["basket_id", 29]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "baskets" SET "updated_at" = '2015-09-29 10:28:33.857727' WHERE "baskets"."id" = 29
  [1m[36m (13.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mOrder Load (0.9ms)[0m  [1mSELECT  "orders".* FROM "orders"   ORDER BY created_at DESC LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "orders" ("address", "created_at", "email", "number", "ordered_on", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["created_at", "2015-09-29 10:28:33.922687"], ["email", "test1@test.com"], ["number", "R201530028"], ["ordered_on", "2015-09-29"], ["updated_at", "2015-09-29 10:28:33.922687"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "baskets" SET "kori_id" = ?, "kori_type" = ?, "updated_at" = ? WHERE "baskets"."id" = 29[0m  [["kori_id", 29], ["kori_type", "Order"], ["updated_at", "2015-09-29 10:28:33.926111"]]
  [1m[35m (107.1ms)[0m  commit transaction
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-29 12:28:34 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-29 12:28:34 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-29 12:28:34 +0200
Started GET "/order" for 127.0.0.1 at 2015-09-29 12:28:34 +0200
Processing by ShopController#order as HTML
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 29]]
  [1m[35mBasket Load (0.3ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1  [["kori_id", 29], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_new.html.haml (3.1ms)
  Rendered shop/order.haml within layouts/application (3.7ms)
Completed 200 OK in 7ms (Views: 4.3ms | ActiveRecord: 0.5ms)
Started POST "/charges" for 127.0.0.1 at 2015-09-29 12:28:39 +0200
Processing by StripeClerk::ChargesController#create as HTML
  Parameters: {"utf8"=>"✓", "stripeToken"=>"tok_16qLLcBj62FxAyFm2zspgEBV", "stripeTokenType"=>"card", "stripeEmail"=>"user@example.com"}
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 29]]
  [1m[35mBasket Load (0.1ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1  [["kori_id", 29], ["kori_type", "Order"]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "orders" SET "address" = ?, "paid_on" = ?, "payment_info" = ?, "payment_type" = ?, "updated_at" = ? WHERE "orders"."id" = 29  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["paid_on", "2015-09-29"], ["payment_info", "ch_16qLLgBj62FxAyFmh09J1e2E"], ["payment_type", "stripe"], ["updated_at", "2015-09-29 10:28:41.108391"]]
  [1m[36m (49.8ms)[0m  [1mcommit transaction[0m
Redirected to http://127.0.0.1:48338/order
Completed 302 Found in 2118ms (ActiveRecord: 50.5ms)
Started GET "/order" for 127.0.0.1 at 2015-09-29 12:28:41 +0200
Processing by ShopController#order as HTML
  [1m[35mOrder Load (0.1ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 29]]
  [1m[36mBasket Load (0.1ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 29], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_show.html.haml (1.8ms)
  Rendered shop/order.haml within layouts/application (2.4ms)
Completed 200 OK in 5ms (Views: 3.1ms | ActiveRecord: 0.3ms)
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mClerk Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "clerks"  WHERE "clerks"."email" = 'ana@email.com' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "products" ("cost", "created_at", "inventory", "link", "name", "price", "properties", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["cost", 5.0], ["created_at", "2015-09-29 10:33:06.853038"], ["inventory", 5], ["link", "product_1"], ["name", "product 1"], ["price", 10.0], ["properties", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["tax", 10.0], ["updated_at", "2015-09-29 10:33:06.853038"]]
  [1m[36m (16.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "baskets" ("created_at", "total_price", "total_tax", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-09-29 10:33:06.886896"], ["total_price", 10.0], ["total_tax", 0.91], ["updated_at", "2015-09-29 10:33:06.886896"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("basket_id", "created_at", "name", "price", "product_id", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["basket_id", 30], ["created_at", "2015-09-29 10:33:06.888321"], ["name", "product 1"], ["price", 10.0], ["product_id", 30], ["tax", 10.0], ["updated_at", "2015-09-29 10:33:06.888321"]]
  [1m[36mBasket Load (0.2ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 30]]
  [1m[35mItem Load (0.2ms)[0m  SELECT "items".* FROM "items"  WHERE "items"."basket_id" = ?  [["basket_id", 30]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "baskets" SET "updated_at" = '2015-09-29 10:33:06.892305' WHERE "baskets"."id" = 30[0m
  [1m[35m (13.4ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.8ms)[0m  SELECT  "orders".* FROM "orders"   ORDER BY created_at DESC LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "orders" ("address", "created_at", "email", "number", "ordered_on", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["created_at", "2015-09-29 10:33:06.996695"], ["email", "test1@test.com"], ["number", "R201530029"], ["ordered_on", "2015-09-29"], ["updated_at", "2015-09-29 10:33:06.996695"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "baskets" SET "kori_id" = ?, "kori_type" = ?, "updated_at" = ? WHERE "baskets"."id" = 30  [["kori_id", 30], ["kori_type", "Order"], ["updated_at", "2015-09-29 10:33:07.000628"]]
  [1m[36m (78.3ms)[0m  [1mcommit transaction[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-29 12:33:07 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-29 12:33:07 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-29 12:33:07 +0200
Started GET "/order" for 127.0.0.1 at 2015-09-29 12:33:07 +0200
Processing by ShopController#order as HTML
  [1m[35mOrder Load (0.4ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 30]]
  [1m[36mBasket Load (0.2ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 30], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_new.html.haml (10.0ms)
  Rendered shop/order.haml within layouts/application (15.0ms)
Completed 200 OK in 23ms (Views: 20.9ms | ActiveRecord: 0.7ms)
Started GET "/assets/application.css" for 127.0.0.1 at 2015-09-29 12:33:07 +0200
Started GET "/assets/application.js" for 127.0.0.1 at 2015-09-29 12:33:07 +0200
Started POST "/charges" for 127.0.0.1 at 2015-09-29 12:33:12 +0200
Processing by StripeClerk::ChargesController#create as HTML
  Parameters: {"utf8"=>"✓", "stripeToken"=>"tok_16qLQ2Bj62FxAyFmHqWSvBpx", "stripeTokenType"=>"card", "stripeEmail"=>"user@example.com"}
  [1m[35mOrder Load (0.1ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 30]]
  [1m[36mBasket Load (0.1ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 30], ["kori_type", "Order"]]
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "orders" SET "address" = ?, "paid_on" = ?, "payment_info" = ?, "payment_type" = ?, "updated_at" = ? WHERE "orders"."id" = 30[0m  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["paid_on", "2015-09-29"], ["payment_info", "ch_16qLQ6Bj62FxAyFmQp2rcAFo"], ["payment_type", "stripe"], ["updated_at", "2015-09-29 10:33:15.147796"]]
  [1m[35m (13.0ms)[0m  commit transaction
Redirected to http://127.0.0.1:52032/order
Completed 302 Found in 2211ms (ActiveRecord: 14.0ms)
Started GET "/order" for 127.0.0.1 at 2015-09-29 12:33:15 +0200
Processing by ShopController#order as HTML
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 30]]
  [1m[35mBasket Load (0.2ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1  [["kori_id", 30], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_show.html.haml (3.7ms)
  Rendered shop/order.haml within layouts/application (5.9ms)
Completed 200 OK in 9ms (Views: 6.8ms | ActiveRecord: 0.3ms)
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mClerk Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "clerks"  WHERE "clerks"."email" = 'ala@email.com' LIMIT 1[0m
Binary data inserted for `string` type on column `password_salt`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "clerks" ("address", "created_at", "email", "encrypted_password", "password_salt", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname: Test Clerk1\n"], ["created_at", "2015-09-29 10:33:48.198401"], ["email", "ala@email.com"], ["encrypted_password", "94fd24754e7156cc6337a0bd3b96482e21d36eababc303882487c6d8592f0d53145327807f7e65517572e2ebaae54134e76223540b72bea5952466ebf7337689"], ["password_salt", "$2a$10$EAMcUuhcWdsOCHfseDvWYO"], ["updated_at", "2015-09-29 10:33:48.198401"]]
  [1m[36m (41.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "products" ("cost", "created_at", "inventory", "link", "name", "price", "properties", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["cost", 5.0], ["created_at", "2015-09-29 10:33:48.289981"], ["inventory", 5], ["link", "product_1"], ["name", "product 1"], ["price", 10.0], ["properties", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["tax", 10.0], ["updated_at", "2015-09-29 10:33:48.289981"]]
  [1m[35m (14.3ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "baskets" ("created_at", "total_price", "total_tax", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-09-29 10:33:48.313041"], ["total_price", 10.0], ["total_tax", 0.91], ["updated_at", "2015-09-29 10:33:48.313041"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("basket_id", "created_at", "name", "price", "product_id", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["basket_id", 31], ["created_at", "2015-09-29 10:33:48.314645"], ["name", "product 1"], ["price", 10.0], ["product_id", 31], ["tax", 10.0], ["updated_at", "2015-09-29 10:33:48.314645"]]
  [1m[35mBasket Load (0.2ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 31]]
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items"  WHERE "items"."basket_id" = ?[0m  [["basket_id", 31]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "baskets" SET "updated_at" = '2015-09-29 10:33:48.318366' WHERE "baskets"."id" = 31
  [1m[36m (13.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mOrder Load (0.8ms)[0m  [1mSELECT  "orders".* FROM "orders"   ORDER BY created_at DESC LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("address", "created_at", "email", "number", "ordered_on", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["created_at", "2015-09-29 10:33:48.424391"], ["email", "ala@email.com"], ["number", "R201530030"], ["ordered_on", "2015-09-29"], ["updated_at", "2015-09-29 10:33:48.424391"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "baskets" SET "kori_id" = ?, "kori_type" = ?, "updated_at" = ? WHERE "baskets"."id" = 31[0m  [["kori_id", 31], ["kori_type", "Order"], ["updated_at", "2015-09-29 10:33:48.426536"]]
  [1m[35m (75.3ms)[0m  commit transaction
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-29 12:33:48 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-29 12:33:48 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-29 12:33:48 +0200
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "products" ("cost", "created_at", "inventory", "link", "name", "price", "properties", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["cost", 5.0], ["created_at", "2015-09-29 10:33:49.121089"], ["inventory", 5], ["link", "product_2"], ["name", "product 2"], ["price", 10.0], ["properties", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["tax", 10.0], ["updated_at", "2015-09-29 10:33:49.121089"]]
  [1m[36m (101.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "baskets" ("created_at", "total_price", "total_tax", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-09-29 10:33:49.228661"], ["total_price", 10.0], ["total_tax", 0.91], ["updated_at", "2015-09-29 10:33:49.228661"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("basket_id", "created_at", "name", "price", "product_id", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["basket_id", 32], ["created_at", "2015-09-29 10:33:49.230791"], ["name", "product 2"], ["price", 10.0], ["product_id", 32], ["tax", 10.0], ["updated_at", "2015-09-29 10:33:49.230791"]]
  [1m[36mBasket Load (0.2ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 32]]
  [1m[35mItem Load (0.2ms)[0m  SELECT "items".* FROM "items"  WHERE "items"."basket_id" = ?  [["basket_id", 32]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "baskets" SET "updated_at" = '2015-09-29 10:33:49.235299' WHERE "baskets"."id" = 32[0m
  [1m[35m (13.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.8ms)[0m  SELECT  "orders".* FROM "orders"   ORDER BY created_at DESC LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "orders" ("address", "created_at", "email", "number", "ordered_on", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["created_at", "2015-09-29 10:33:49.299687"], ["email", "test1@test.com"], ["number", "R201530031"], ["ordered_on", "2015-09-29"], ["updated_at", "2015-09-29 10:33:49.299687"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "baskets" SET "kori_id" = ?, "kori_type" = ?, "updated_at" = ? WHERE "baskets"."id" = 32  [["kori_id", 32], ["kori_type", "Order"], ["updated_at", "2015-09-29 10:33:49.302140"]]
  [1m[36m (14.9ms)[0m  [1mcommit transaction[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-29 12:33:49 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-29 12:33:49 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-29 12:33:49 +0200
Started GET "/order" for 127.0.0.1 at 2015-09-29 12:33:49 +0200
Processing by ShopController#order as HTML
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 32]]
  [1m[36mBasket Load (0.2ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 32], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_new.html.haml (9.4ms)
  Rendered shop/order.haml within layouts/application (14.1ms)
Completed 200 OK in 48ms (Views: 20.1ms | ActiveRecord: 0.4ms)
Started GET "/assets/application.css" for 127.0.0.1 at 2015-09-29 12:33:49 +0200
Started GET "/assets/application.js" for 127.0.0.1 at 2015-09-29 12:33:49 +0200
Started POST "/charges" for 127.0.0.1 at 2015-09-29 12:33:55 +0200
Processing by StripeClerk::ChargesController#create as HTML
  Parameters: {"utf8"=>"✓", "stripeToken"=>"tok_16qLQiBj62FxAyFmYstc5tkZ", "stripeTokenType"=>"card", "stripeEmail"=>"user@example.com"}
  [1m[35mOrder Load (0.3ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 32]]
  [1m[36mBasket Load (0.4ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 32], ["kori_type", "Order"]]
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "orders" SET "address" = ?, "paid_on" = ?, "payment_info" = ?, "payment_type" = ?, "updated_at" = ? WHERE "orders"."id" = 32[0m  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["paid_on", "2015-09-29"], ["payment_info", "ch_16qLQmBj62FxAyFmsf1YgsDl"], ["payment_type", "stripe"], ["updated_at", "2015-09-29 10:33:57.117137"]]
  [1m[35m (70.0ms)[0m  commit transaction
Redirected to http://127.0.0.1:37074/order
Completed 302 Found in 2101ms (ActiveRecord: 71.9ms)
Started GET "/order" for 127.0.0.1 at 2015-09-29 12:33:57 +0200
Processing by ShopController#order as HTML
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 32]]
  [1m[35mBasket Load (0.1ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1  [["kori_id", 32], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_show.html.haml (2.9ms)
  Rendered shop/order.haml within layouts/application (4.3ms)
Completed 200 OK in 7ms (Views: 4.9ms | ActiveRecord: 0.2ms)
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mClerk Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "clerks"  WHERE "clerks"."email" = 'ola@email.com' LIMIT 1[0m
Binary data inserted for `string` type on column `password_salt`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "clerks" ("address", "created_at", "email", "encrypted_password", "password_salt", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname: Test Clerk1\n"], ["created_at", "2015-09-29 10:35:36.298898"], ["email", "ola@email.com"], ["encrypted_password", "a7f4b34ca1941308839404da7933b9189012df4b9dbc8d77911362055e5499bf87dd74400e314bdbeb1e130e13f627d0f6c83937c2df83c9777a9943f2b5c103"], ["password_salt", "$2a$10$jpS4Y49o45wPY7g/cpk74u"], ["updated_at", "2015-09-29 10:35:36.298898"]]
  [1m[36m (15.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "products" ("cost", "created_at", "inventory", "link", "name", "price", "properties", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["cost", 5.0], ["created_at", "2015-09-29 10:35:36.357209"], ["inventory", 5], ["link", "product_1"], ["name", "product 1"], ["price", 10.0], ["properties", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["tax", 10.0], ["updated_at", "2015-09-29 10:35:36.357209"]]
  [1m[35m (14.2ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "baskets" ("created_at", "total_price", "total_tax", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-09-29 10:35:36.380525"], ["total_price", 10.0], ["total_tax", 0.91], ["updated_at", "2015-09-29 10:35:36.380525"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("basket_id", "created_at", "name", "price", "product_id", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["basket_id", 33], ["created_at", "2015-09-29 10:35:36.381761"], ["name", "product 1"], ["price", 10.0], ["product_id", 33], ["tax", 10.0], ["updated_at", "2015-09-29 10:35:36.381761"]]
  [1m[35mBasket Load (0.1ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 33]]
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items"  WHERE "items"."basket_id" = ?[0m  [["basket_id", 33]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "baskets" SET "updated_at" = '2015-09-29 10:35:36.384926' WHERE "baskets"."id" = 33
  [1m[36m (13.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mOrder Load (0.9ms)[0m  [1mSELECT  "orders".* FROM "orders"   ORDER BY created_at DESC LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "orders" ("address", "created_at", "email", "number", "ordered_on", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["created_at", "2015-09-29 10:35:36.487139"], ["email", "ola@email.com"], ["number", "R201530032"], ["ordered_on", "2015-09-29"], ["updated_at", "2015-09-29 10:35:36.487139"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "baskets" SET "kori_id" = ?, "kori_type" = ?, "updated_at" = ? WHERE "baskets"."id" = 33[0m  [["kori_id", 33], ["kori_type", "Order"], ["updated_at", "2015-09-29 10:35:36.490804"]]
  [1m[35m (77.4ms)[0m  commit transaction
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-29 12:35:36 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-29 12:35:37 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-29 12:35:37 +0200
  [1m[36m (0.6ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "products" ("cost", "created_at", "inventory", "link", "name", "price", "properties", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["cost", 5.0], ["created_at", "2015-09-29 10:35:37.208553"], ["inventory", 5], ["link", "product_2"], ["name", "product 2"], ["price", 10.0], ["properties", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["tax", 10.0], ["updated_at", "2015-09-29 10:35:37.208553"]]
  [1m[36m (68.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "baskets" ("created_at", "total_price", "total_tax", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-09-29 10:35:37.280953"], ["total_price", 10.0], ["total_tax", 0.91], ["updated_at", "2015-09-29 10:35:37.280953"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "items" ("basket_id", "created_at", "name", "price", "product_id", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["basket_id", 34], ["created_at", "2015-09-29 10:35:37.283179"], ["name", "product 2"], ["price", 10.0], ["product_id", 34], ["tax", 10.0], ["updated_at", "2015-09-29 10:35:37.283179"]]
  [1m[36mBasket Load (0.3ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 34]]
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items"  WHERE "items"."basket_id" = ?  [["basket_id", 34]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "baskets" SET "updated_at" = '2015-09-29 10:35:37.290082' WHERE "baskets"."id" = 34[0m
  [1m[35m (13.6ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.4ms)[0m  SELECT  "orders".* FROM "orders"   ORDER BY created_at DESC LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("address", "created_at", "email", "number", "ordered_on", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["created_at", "2015-09-29 10:35:37.351178"], ["email", "test1@test.com"], ["number", "R201530033"], ["ordered_on", "2015-09-29"], ["updated_at", "2015-09-29 10:35:37.351178"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "baskets" SET "kori_id" = ?, "kori_type" = ?, "updated_at" = ? WHERE "baskets"."id" = 34  [["kori_id", 34], ["kori_type", "Order"], ["updated_at", "2015-09-29 10:35:37.352977"]]
  [1m[36m (13.6ms)[0m  [1mcommit transaction[0m
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-29 12:35:37 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-29 12:35:37 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-29 12:35:37 +0200
Started GET "/order" for 127.0.0.1 at 2015-09-29 12:35:37 +0200
Processing by ShopController#order as HTML
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 34]]
  [1m[36mBasket Load (0.2ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 34], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_new.html.haml (9.7ms)
  Rendered shop/order.haml within layouts/application (14.4ms)
Completed 200 OK in 48ms (Views: 20.4ms | ActiveRecord: 0.4ms)
Started GET "/assets/application.css" for 127.0.0.1 at 2015-09-29 12:35:37 +0200
Started GET "/assets/application.js" for 127.0.0.1 at 2015-09-29 12:35:37 +0200
Started POST "/charges" for 127.0.0.1 at 2015-09-29 12:35:43 +0200
Processing by StripeClerk::ChargesController#create as HTML
  Parameters: {"utf8"=>"✓", "stripeToken"=>"tok_16qLSSBj62FxAyFmVIqr6WTA", "stripeTokenType"=>"card", "stripeEmail"=>"user@example.com"}
  [1m[35mOrder Load (0.1ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 34]]
  [1m[36mBasket Load (0.1ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 34], ["kori_type", "Order"]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "orders" SET "address" = ?, "paid_on" = ?, "payment_info" = ?, "payment_type" = ?, "updated_at" = ? WHERE "orders"."id" = 34[0m  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["paid_on", "2015-09-29"], ["payment_info", "ch_16qLSXBj62FxAyFmuiqwdw0t"], ["payment_type", "stripe"], ["updated_at", "2015-09-29 10:35:45.903962"]]
  [1m[35m (14.7ms)[0m  commit transaction
Redirected to http://127.0.0.1:53154/order
Completed 302 Found in 2032ms (ActiveRecord: 15.7ms)
Started GET "/order" for 127.0.0.1 at 2015-09-29 12:35:45 +0200
Processing by ShopController#order as HTML
  [1m[36mOrder Load (0.2ms)[0m  [1mSELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 34]]
  [1m[35mBasket Load (0.1ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1  [["kori_id", 34], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_show.html.haml (3.2ms)
  Rendered shop/order.haml within layouts/application (5.4ms)
Completed 200 OK in 9ms (Views: 6.2ms | ActiveRecord: 0.3ms)
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mClerk Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "clerks"  WHERE "clerks"."email" = 'ela@email.com' LIMIT 1[0m
Binary data inserted for `string` type on column `password_salt`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "clerks" ("address", "created_at", "email", "encrypted_password", "password_salt", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname: Test Clerk1\n"], ["created_at", "2015-09-29 10:36:16.698226"], ["email", "ela@email.com"], ["encrypted_password", "2de3a4e00e7ac69ea3733fda9be807ef6849917c1e135b6dadbddba75166ecbed237770930d02effbc6f846e62faf123fbb060ab9e81c7a7ab3c2787d8262b2d"], ["password_salt", "$2a$10$MV4hQP97VPCEOofE12luG."], ["updated_at", "2015-09-29 10:36:16.698226"]]
  [1m[36m (15.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "products" ("cost", "created_at", "inventory", "link", "name", "price", "properties", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["cost", 5.0], ["created_at", "2015-09-29 10:36:16.762281"], ["inventory", 5], ["link", "product_1"], ["name", "product 1"], ["price", 10.0], ["properties", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["tax", 10.0], ["updated_at", "2015-09-29 10:36:16.762281"]]
  [1m[35m (14.4ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "baskets" ("created_at", "total_price", "total_tax", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-09-29 10:36:16.793627"], ["total_price", 10.0], ["total_tax", 0.91], ["updated_at", "2015-09-29 10:36:16.793627"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("basket_id", "created_at", "name", "price", "product_id", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["basket_id", 35], ["created_at", "2015-09-29 10:36:16.794788"], ["name", "product 1"], ["price", 10.0], ["product_id", 35], ["tax", 10.0], ["updated_at", "2015-09-29 10:36:16.794788"]]
  [1m[35mBasket Load (0.1ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 35]]
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items"  WHERE "items"."basket_id" = ?[0m  [["basket_id", 35]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "baskets" SET "updated_at" = '2015-09-29 10:36:16.797391' WHERE "baskets"."id" = 35
  [1m[36m (13.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mOrder Load (0.8ms)[0m  [1mSELECT  "orders".* FROM "orders"   ORDER BY created_at DESC LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "orders" ("address", "created_at", "email", "number", "ordered_on", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["created_at", "2015-09-29 10:36:16.873233"], ["email", "ela@email.com"], ["number", "R201530034"], ["ordered_on", "2015-09-29"], ["updated_at", "2015-09-29 10:36:16.873233"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "baskets" SET "kori_id" = ?, "kori_type" = ?, "updated_at" = ? WHERE "baskets"."id" = 35[0m  [["kori_id", 35], ["kori_type", "Order"], ["updated_at", "2015-09-29 10:36:16.877017"]]
  [1m[35m (102.0ms)[0m  commit transaction
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-29 12:36:17 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-29 12:36:17 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-29 12:36:17 +0200
Started GET "/rack_session.raw" for 127.0.0.1 at 2015-09-29 12:36:17 +0200
Started GET "/order" for 127.0.0.1 at 2015-09-29 12:36:17 +0200
Processing by ShopController#order as HTML
  [1m[36mOrder Load (0.4ms)[0m  [1mSELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 35]]
  [1m[35mBasket Load (0.1ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1  [["kori_id", 35], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_new.html.haml (9.4ms)
  Rendered shop/order.haml within layouts/application (14.3ms)
Completed 200 OK in 50ms (Views: 20.3ms | ActiveRecord: 0.7ms)
Started GET "/assets/application.js" for 127.0.0.1 at 2015-09-29 12:36:17 +0200
Started GET "/assets/application.css" for 127.0.0.1 at 2015-09-29 12:36:17 +0200
Started POST "/charges" for 127.0.0.1 at 2015-09-29 12:36:23 +0200
Processing by StripeClerk::ChargesController#create as HTML
  Parameters: {"utf8"=>"✓", "stripeToken"=>"tok_16qLT6Bj62FxAyFmk8y4GGJx", "stripeTokenType"=>"card", "stripeEmail"=>"user@example.com"}
  [1m[36mOrder Load (0.2ms)[0m  [1mSELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 35]]
  [1m[35mBasket Load (0.1ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1  [["kori_id", 35], ["kori_type", "Order"]]
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  UPDATE "orders" SET "address" = ?, "paid_on" = ?, "payment_info" = ?, "payment_type" = ?, "updated_at" = ? WHERE "orders"."id" = 35  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["paid_on", "2015-09-29"], ["payment_info", "ch_16qLTABj62FxAyFmsxHzfRKs"], ["payment_type", "stripe"], ["updated_at", "2015-09-29 10:36:25.204951"]]
  [1m[36m (36.6ms)[0m  [1mcommit transaction[0m
Redirected to http://127.0.0.1:54906/order
Completed 302 Found in 2136ms (ActiveRecord: 38.3ms)
Started GET "/order" for 127.0.0.1 at 2015-09-29 12:36:25 +0200
Processing by ShopController#order as HTML
  [1m[35mOrder Load (0.1ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 35]]
  [1m[36mBasket Load (0.1ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 35], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_show.html.haml (2.7ms)
  Rendered shop/order.haml within layouts/application (3.8ms)
Completed 200 OK in 6ms (Views: 4.3ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "products" ("cost", "created_at", "inventory", "link", "name", "price", "properties", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["cost", 5.0], ["created_at", "2015-09-29 10:36:36.335074"], ["inventory", 5], ["link", "product_2"], ["name", "product 2"], ["price", 10.0], ["properties", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["tax", 10.0], ["updated_at", "2015-09-29 10:36:36.335074"]]
  [1m[35m (83.0ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "baskets" ("created_at", "total_price", "total_tax", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-09-29 10:36:36.424402"], ["total_price", 10.0], ["total_tax", 0.91], ["updated_at", "2015-09-29 10:36:36.424402"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("basket_id", "created_at", "name", "price", "product_id", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["basket_id", 36], ["created_at", "2015-09-29 10:36:36.426289"], ["name", "product 2"], ["price", 10.0], ["product_id", 36], ["tax", 10.0], ["updated_at", "2015-09-29 10:36:36.426289"]]
  [1m[35mBasket Load (0.1ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 36]]
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items"  WHERE "items"."basket_id" = ?[0m  [["basket_id", 36]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "baskets" SET "updated_at" = '2015-09-29 10:36:36.428702' WHERE "baskets"."id" = 36
  [1m[36m (13.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mOrder Load (1.0ms)[0m  [1mSELECT  "orders".* FROM "orders"   ORDER BY created_at DESC LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("address", "created_at", "email", "number", "ordered_on", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["created_at", "2015-09-29 10:36:36.497701"], ["email", "test1@test.com"], ["number", "R201530035"], ["ordered_on", "2015-09-29"], ["updated_at", "2015-09-29 10:36:36.497701"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "baskets" SET "kori_id" = ?, "kori_type" = ?, "updated_at" = ? WHERE "baskets"."id" = 36[0m  [["kori_id", 36], ["kori_type", "Order"], ["updated_at", "2015-09-29 10:36:36.499136"]]
  [1m[35m (34.2ms)[0m  commit transaction
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-29 12:36:36 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-29 12:36:36 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-29 12:36:36 +0200
Started GET "/order" for 127.0.0.1 at 2015-09-29 12:36:36 +0200
Processing by ShopController#order as HTML
  [1m[36mOrder Load (0.4ms)[0m  [1mSELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 36]]
  [1m[35mBasket Load (0.4ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1  [["kori_id", 36], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_new.html.haml (3.6ms)
  Rendered shop/order.haml within layouts/application (4.5ms)
Completed 200 OK in 8ms (Views: 5.0ms | ActiveRecord: 0.8ms)
Started POST "/charges" for 127.0.0.1 at 2015-09-29 12:36:41 +0200
Processing by StripeClerk::ChargesController#create as HTML
  Parameters: {"utf8"=>"✓", "stripeToken"=>"tok_16qLTOBj62FxAyFm8EaWhHZS", "stripeTokenType"=>"card", "stripeEmail"=>"user@example.com"}
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 36]]
  [1m[35mBasket Load (0.3ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1  [["kori_id", 36], ["kori_type", "Order"]]
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "orders" SET "address" = ?, "paid_on" = ?, "payment_info" = ?, "payment_type" = ?, "updated_at" = ? WHERE "orders"."id" = 36  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["paid_on", "2015-09-29"], ["payment_info", "ch_16qLTTBj62FxAyFm49Y3zexH"], ["payment_type", "stripe"], ["updated_at", "2015-09-29 10:36:43.748281"]]
  [1m[36m (13.3ms)[0m  [1mcommit transaction[0m
Redirected to http://127.0.0.1:54906/order
Completed 302 Found in 2142ms (ActiveRecord: 15.1ms)
Started GET "/order" for 127.0.0.1 at 2015-09-29 12:36:43 +0200
Processing by ShopController#order as HTML
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 36]]
  [1m[36mBasket Load (0.1ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 36], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_show.html.haml (2.2ms)
  Rendered shop/order.haml within layouts/application (2.8ms)
Completed 200 OK in 7ms (Views: 3.5ms | ActiveRecord: 0.4ms)
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "products" ("cost", "created_at", "inventory", "link", "name", "price", "properties", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["cost", 5.0], ["created_at", "2015-09-29 10:41:39.127339"], ["inventory", 5], ["link", "product_1"], ["name", "product 1"], ["price", 10.0], ["properties", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["tax", 10.0], ["updated_at", "2015-09-29 10:41:39.127339"]]
  [1m[35m (14.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "baskets" ("created_at", "total_price", "total_tax", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-09-29 10:41:39.162523"], ["total_price", 10.0], ["total_tax", 0.91], ["updated_at", "2015-09-29 10:41:39.162523"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("basket_id", "created_at", "name", "price", "product_id", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["basket_id", 37], ["created_at", "2015-09-29 10:41:39.163625"], ["name", "product 1"], ["price", 10.0], ["product_id", 37], ["tax", 10.0], ["updated_at", "2015-09-29 10:41:39.163625"]]
  [1m[35mBasket Load (0.1ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 37]]
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items"  WHERE "items"."basket_id" = ?[0m  [["basket_id", 37]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "baskets" SET "updated_at" = '2015-09-29 10:41:39.167176' WHERE "baskets"."id" = 37
  [1m[36m (13.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mOrder Load (0.9ms)[0m  [1mSELECT  "orders".* FROM "orders"   ORDER BY created_at DESC LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "orders" ("address", "created_at", "email", "number", "ordered_on", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["created_at", "2015-09-29 10:41:39.415731"], ["email", "test1@test.com"], ["number", "R201530036"], ["ordered_on", "2015-09-29"], ["updated_at", "2015-09-29 10:41:39.415731"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "baskets" SET "kori_id" = ?, "kori_type" = ?, "updated_at" = ? WHERE "baskets"."id" = 37[0m  [["kori_id", 37], ["kori_type", "Order"], ["updated_at", "2015-09-29 10:41:39.419566"]]
  [1m[35m (30.1ms)[0m  commit transaction
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-29 12:41:39 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-29 12:41:39 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-29 12:41:39 +0200
Started GET "/order" for 127.0.0.1 at 2015-09-29 12:41:39 +0200
Processing by ShopController#order as HTML
  [1m[36mOrder Load (0.4ms)[0m  [1mSELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 37]]
  [1m[35mBasket Load (0.2ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1  [["kori_id", 37], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_new.html.haml (9.7ms)
  Rendered shop/order.haml within layouts/application (15.0ms)
Completed 200 OK in 54ms (Views: 20.8ms | ActiveRecord: 0.9ms)
Started GET "/assets/application.css" for 127.0.0.1 at 2015-09-29 12:41:40 +0200
Started GET "/assets/application.js" for 127.0.0.1 at 2015-09-29 12:41:40 +0200
Started POST "/charges" for 127.0.0.1 at 2015-09-29 12:41:47 +0200
Processing by StripeClerk::ChargesController#create as HTML
  Parameters: {"utf8"=>"✓", "stripeToken"=>"tok_16qLYKBj62FxAyFmec57PeVL", "stripeTokenType"=>"card", "stripeEmail"=>"user@example.com"}
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 37]]
  [1m[35mBasket Load (0.1ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1  [["kori_id", 37], ["kori_type", "Order"]]
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "address" = ?, "paid_on" = ?, "payment_info" = ?, "payment_type" = ?, "updated_at" = ? WHERE "orders"."id" = 37  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["paid_on", "2015-09-29"], ["payment_info", "ch_16qLYPBj62FxAyFmSclUBufb"], ["payment_type", "stripe"], ["updated_at", "2015-09-29 10:41:49.633242"]]
  [1m[36m (33.6ms)[0m  [1mcommit transaction[0m
Redirected to http://127.0.0.1:57633/order
Completed 302 Found in 2451ms (ActiveRecord: 34.9ms)
Started GET "/order" for 127.0.0.1 at 2015-09-29 12:41:49 +0200
Processing by ShopController#order as HTML
  [1m[35mOrder Load (0.1ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 37]]
  [1m[36mBasket Load (0.1ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 37], ["kori_type", "Order"]]
  Rendered /home/ana/RailsProjects/RGSoC/RubyClerks/stripe_clerk/app/views/stripe_clerk/charges/_show.html.haml (4.4ms)
  Rendered shop/order.haml within layouts/application (5.8ms)
Completed 200 OK in 9ms (Views: 6.6ms | ActiveRecord: 0.2ms)
  [1m[36mPurchase Load (0.2ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (14.1ms)[0m  [1mINSERT INTO "products" ("cost", "created_at", "inventory", "link", "name", "price", "properties", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["cost", 5.0], ["created_at", "2015-09-30 13:19:57.056112"], ["inventory", 5], ["link", "product_1"], ["name", "product 1"], ["price", 10.0], ["properties", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["tax", 10.0], ["updated_at", "2015-09-30 13:19:57.056112"]]
  [1m[35m (177.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "baskets" ("created_at", "total_price", "total_tax", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-09-30 13:19:57.322041"], ["total_price", 10.0], ["total_tax", 0.91], ["updated_at", "2015-09-30 13:19:57.322041"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("basket_id", "created_at", "name", "price", "product_id", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["basket_id", 38], ["created_at", "2015-09-30 13:19:57.324582"], ["name", "product 1"], ["price", 10.0], ["product_id", 38], ["tax", 10.0], ["updated_at", "2015-09-30 13:19:57.324582"]]
  [1m[35mBasket Load (0.3ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 38]]
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT "items".* FROM "items"  WHERE "items"."basket_id" = ?[0m  [["basket_id", 38]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "baskets" SET "updated_at" = '2015-09-30 13:19:57.332379' WHERE "baskets"."id" = 38
  [1m[36m (187.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mOrder Load (0.7ms)[0m  [1mSELECT  "orders".* FROM "orders"   ORDER BY created_at DESC LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "orders" ("address", "created_at", "email", "number", "ordered_on", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["created_at", "2015-09-30 13:19:57.888126"], ["email", "test1@test.com"], ["number", "R201530037"], ["ordered_on", "2015-09-30"], ["updated_at", "2015-09-30 13:19:57.888126"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "baskets" SET "kori_id" = ?, "kori_type" = ?, "updated_at" = ? WHERE "baskets"."id" = 38[0m  [["kori_id", 38], ["kori_type", "Order"], ["updated_at", "2015-09-30 13:19:57.891145"]]
  [1m[35m (170.2ms)[0m  commit transaction
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-30 15:20:00 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-30 15:20:01 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-30 15:20:01 +0200
Started GET "/order" for 127.0.0.1 at 2015-09-30 15:20:01 +0200
Processing by ShopController#order as HTML
  [1m[36mOrder Load (0.9ms)[0m  [1mSELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 38]]
  [1m[35mBasket Load (0.4ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1  [["kori_id", 38], ["kori_type", "Order"]]
  Rendered /home/basia/projects/rubyclerk/stripe_clerk/app/views/stripe_clerk/charges/_new.html.haml (45.0ms)
  Rendered shop/order.haml within layouts/application (62.1ms)
Completed 200 OK in 538ms (Views: 106.9ms | ActiveRecord: 2.4ms)
Started GET "/assets/application.css" for 127.0.0.1 at 2015-09-30 15:20:01 +0200
Started GET "/assets/application.js" for 127.0.0.1 at 2015-09-30 15:20:02 +0200
Started POST "/charges" for 127.0.0.1 at 2015-09-30 15:20:09 +0200
Processing by StripeClerk::ChargesController#create as HTML
  Parameters: {"utf8"=>"✓", "stripeToken"=>"tok_16qkV8Bj62FxAyFm5OdL4tO9", "stripeTokenType"=>"card", "stripeEmail"=>"user@example.com"}
  [1m[36mOrder Load (0.2ms)[0m  [1mSELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 38]]
  [1m[35mBasket Load (0.2ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1  [["kori_id", 38], ["kori_type", "Order"]]
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "orders" SET "address" = ?, "paid_on" = ?, "payment_info" = ?, "payment_type" = ?, "updated_at" = ? WHERE "orders"."id" = 38  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["paid_on", "2015-09-30"], ["payment_info", "ch_16qkVDBj62FxAyFmVGUNFNM3"], ["payment_type", "stripe"], ["updated_at", "2015-09-30 13:20:11.588579"]]
  [1m[36m (128.4ms)[0m  [1mcommit transaction[0m
Redirected to http://127.0.0.1:48824/order
Completed 302 Found in 2344ms (ActiveRecord: 129.7ms)
Started GET "/order" for 127.0.0.1 at 2015-09-30 15:20:11 +0200
Processing by ShopController#order as HTML
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 38]]
  [1m[36mBasket Load (0.2ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 38], ["kori_type", "Order"]]
  Rendered /home/basia/projects/rubyclerk/stripe_clerk/app/views/stripe_clerk/charges/_show.html.haml (5.1ms)
  Rendered shop/order.haml within layouts/application (27.8ms)
Completed 200 OK in 32ms (Views: 28.9ms | ActiveRecord: 0.4ms)
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "products" ("cost", "created_at", "inventory", "link", "name", "price", "properties", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["cost", 5.0], ["created_at", "2015-09-30 13:23:37.181638"], ["inventory", 5], ["link", "product_1"], ["name", "product 1"], ["price", 10.0], ["properties", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["tax", 10.0], ["updated_at", "2015-09-30 13:23:37.181638"]]
  [1m[35m (119.3ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "baskets" ("created_at", "total_price", "total_tax", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-09-30 13:23:37.321738"], ["total_price", 10.0], ["total_tax", 0.91], ["updated_at", "2015-09-30 13:23:37.321738"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "items" ("basket_id", "created_at", "name", "price", "product_id", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["basket_id", 39], ["created_at", "2015-09-30 13:23:37.324067"], ["name", "product 1"], ["price", 10.0], ["product_id", 39], ["tax", 10.0], ["updated_at", "2015-09-30 13:23:37.324067"]]
  [1m[35mBasket Load (0.3ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 39]]
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT "items".* FROM "items"  WHERE "items"."basket_id" = ?[0m  [["basket_id", 39]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "baskets" SET "updated_at" = '2015-09-30 13:23:37.331849' WHERE "baskets"."id" = 39
  [1m[36m (114.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mOrder Load (0.7ms)[0m  [1mSELECT  "orders".* FROM "orders"   ORDER BY created_at DESC LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "orders" ("address", "created_at", "email", "number", "ordered_on", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["created_at", "2015-09-30 13:23:37.670531"], ["email", "test1@test.com"], ["number", "R201530038"], ["ordered_on", "2015-09-30"], ["updated_at", "2015-09-30 13:23:37.670531"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "baskets" SET "kori_id" = ?, "kori_type" = ?, "updated_at" = ? WHERE "baskets"."id" = 39[0m  [["kori_id", 39], ["kori_type", "Order"], ["updated_at", "2015-09-30 13:23:37.673633"]]
  [1m[35m (122.1ms)[0m  commit transaction
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-30 15:23:38 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-30 15:23:38 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-30 15:23:38 +0200
Started GET "/order" for 127.0.0.1 at 2015-09-30 15:23:38 +0200
Processing by ShopController#order as HTML
  [1m[36mOrder Load (0.7ms)[0m  [1mSELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 39]]
  [1m[35mBasket Load (0.2ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1  [["kori_id", 39], ["kori_type", "Order"]]
  Rendered /home/basia/projects/rubyclerk/stripe_clerk/app/views/stripe_clerk/charges/_new.html.haml (13.6ms)
  Rendered shop/order.haml within layouts/application (22.1ms)
Completed 200 OK in 115ms (Views: 31.5ms | ActiveRecord: 1.5ms)
Started GET "/assets/application.css" for 127.0.0.1 at 2015-09-30 15:23:38 +0200
Started GET "/assets/application.js" for 127.0.0.1 at 2015-09-30 15:23:38 +0200
Started POST "/charges" for 127.0.0.1 at 2015-09-30 15:23:45 +0200
Processing by StripeClerk::ChargesController#create as HTML
  Parameters: {"utf8"=>"✓", "stripeToken"=>"tok_16qkYcBj62FxAyFmp3DIv4Cz", "stripeTokenType"=>"card", "stripeEmail"=>"user@example.com"}
  [1m[36mOrder Load (0.2ms)[0m  [1mSELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 39]]
  [1m[35mBasket Load (0.2ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1  [["kori_id", 39], ["kori_type", "Order"]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "orders" SET "address" = ?, "paid_on" = ?, "payment_info" = ?, "payment_type" = ?, "updated_at" = ? WHERE "orders"."id" = 39  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["paid_on", "2015-09-30"], ["payment_info", "ch_16qkYhBj62FxAyFm21xi7fnr"], ["payment_type", "stripe"], ["updated_at", "2015-09-30 13:23:47.379036"]]
  [1m[36m (118.4ms)[0m  [1mcommit transaction[0m
Redirected to http://127.0.0.1:43026/order
Completed 302 Found in 2265ms (ActiveRecord: 119.9ms)
Started GET "/order" for 127.0.0.1 at 2015-09-30 15:23:47 +0200
Processing by ShopController#order as HTML
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 39]]
  [1m[36mBasket Load (0.3ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 39], ["kori_type", "Order"]]
  Rendered /home/basia/projects/rubyclerk/stripe_clerk/app/views/stripe_clerk/charges/_show.html.haml (6.7ms)
  Rendered shop/order.haml within layouts/application (10.0ms)
Completed 200 OK in 14ms (Views: 11.1ms | ActiveRecord: 0.5ms)
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases"  WHERE "purchases"."name" IS NULL[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "products" ("cost", "created_at", "inventory", "link", "name", "price", "properties", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["cost", 5.0], ["created_at", "2015-09-30 13:36:48.976925"], ["inventory", 5], ["link", "product_1"], ["name", "product 1"], ["price", 10.0], ["properties", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["tax", 10.0], ["updated_at", "2015-09-30 13:36:48.976925"]]
  [1m[35m (303.8ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "baskets" ("created_at", "total_price", "total_tax", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-09-30 13:36:49.301733"], ["total_price", 10.0], ["total_tax", 0.91], ["updated_at", "2015-09-30 13:36:49.301733"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "items" ("basket_id", "created_at", "name", "price", "product_id", "tax", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["basket_id", 40], ["created_at", "2015-09-30 13:36:49.304070"], ["name", "product 1"], ["price", 10.0], ["product_id", 40], ["tax", 10.0], ["updated_at", "2015-09-30 13:36:49.304070"]]
  [1m[35mBasket Load (0.3ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 40]]
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT "items".* FROM "items"  WHERE "items"."basket_id" = ?[0m  [["basket_id", 40]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "baskets" SET "updated_at" = '2015-09-30 13:36:49.311775' WHERE "baskets"."id" = 40
  [1m[36m (254.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mOrder Load (0.7ms)[0m  [1mSELECT  "orders".* FROM "orders"   ORDER BY created_at DESC LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "orders" ("address", "created_at", "email", "number", "ordered_on", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["created_at", "2015-09-30 13:36:49.875453"], ["email", "test1@test.com"], ["number", "R201530039"], ["ordered_on", "2015-09-30"], ["updated_at", "2015-09-30 13:36:49.875453"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "baskets" SET "kori_id" = ?, "kori_type" = ?, "updated_at" = ? WHERE "baskets"."id" = 40[0m  [["kori_id", 40], ["kori_type", "Order"], ["updated_at", "2015-09-30 13:36:49.878389"]]
  [1m[35m (598.0ms)[0m  commit transaction
Started GET "/rack_session/edit" for 127.0.0.1 at 2015-09-30 15:36:50 +0200
Started PUT "/rack_session" for 127.0.0.1 at 2015-09-30 15:36:51 +0200
Started GET "/rack_session" for 127.0.0.1 at 2015-09-30 15:36:51 +0200
Started GET "/order" for 127.0.0.1 at 2015-09-30 15:36:51 +0200
Processing by ShopController#order as HTML
  [1m[36mOrder Load (0.7ms)[0m  [1mSELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 40]]
  [1m[35mBasket Load (0.2ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1  [["kori_id", 40], ["kori_type", "Order"]]
  Rendered /home/basia/projects/rubyclerk/stripe_clerk/app/views/stripe_clerk/charges/_new.html.haml (13.9ms)
  Rendered shop/order.haml within layouts/application (23.0ms)
Completed 200 OK in 132ms (Views: 41.5ms | ActiveRecord: 1.6ms)
Started GET "/assets/application.css" for 127.0.0.1 at 2015-09-30 15:36:51 +0200
Started GET "/assets/application.js" for 127.0.0.1 at 2015-09-30 15:36:51 +0200
Started POST "/charges" for 127.0.0.1 at 2015-09-30 15:36:57 +0200
Processing by StripeClerk::ChargesController#create as HTML
  Parameters: {"utf8"=>"✓", "stripeToken"=>"tok_16qklPBj62FxAyFm0xASnzkc", "stripeTokenType"=>"card", "stripeEmail"=>"user@example.com"}
  [1m[36mOrder Load (0.2ms)[0m  [1mSELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["id", 40]]
  [1m[35mBasket Load (0.2ms)[0m  SELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1  [["kori_id", 40], ["kori_type", "Order"]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "orders" SET "address" = ?, "paid_on" = ?, "payment_info" = ?, "payment_type" = ?, "updated_at" = ? WHERE "orders"."id" = 40  [["address", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess {}\n"], ["paid_on", "2015-09-30"], ["payment_info", "ch_16qklTBj62FxAyFmfjJTTvHO"], ["payment_type", "stripe"], ["updated_at", "2015-09-30 13:37:00.121413"]]
  [1m[36m (289.6ms)[0m  [1mcommit transaction[0m
Redirected to http://127.0.0.1:48353/order
Completed 302 Found in 2471ms (ActiveRecord: 291.0ms)
Started GET "/order" for 127.0.0.1 at 2015-09-30 15:37:00 +0200
Processing by ShopController#order as HTML
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders"  WHERE "orders"."id" = ?  ORDER BY created_at DESC LIMIT 1  [["id", 40]]
  [1m[36mBasket Load (0.2ms)[0m  [1mSELECT  "baskets".* FROM "baskets"  WHERE "baskets"."kori_id" = ? AND "baskets"."kori_type" = ?  ORDER BY created_at DESC LIMIT 1[0m  [["kori_id", 40], ["kori_type", "Order"]]
  Rendered /home/basia/projects/rubyclerk/stripe_clerk/app/views/stripe_clerk/charges/_show.html.haml (5.2ms)
  Rendered shop/order.haml within layouts/application (7.8ms)
Completed 200 OK in 12ms (Views: 9.0ms | ActiveRecord: 0.4ms)
